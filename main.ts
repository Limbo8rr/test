namespace SpriteKind {
    export const Sword = SpriteKind.create()
    export const Spectre = SpriteKind.create()
    export const Text = SpriteKind.create()
    export const Building = SpriteKind.create()
    export const Bat = SpriteKind.create()
    export const Boss = SpriteKind.create()
    export const bug = SpriteKind.create()
    export const Coin = SpriteKind.create()
    export const Burrowers = SpriteKind.create()
}
function moveBats () {
    for (let value of sprites.allOfKind(SpriteKind.Bat)) {
        if (value.vx != 0 || value.vy != 0) {
            value.setVelocity(0, 0)
        } else if (Math.percentChance(33)) {
            value.setVelocity(randint(-1, 1) * 20, 0)
        } else if (Math.percentChance(33)) {
            value.setVelocity(0, randint(-1, 1) * 20)
        }
    }
}
function ghostChangeDirectionOnWallHit (sprite: Sprite) {
    this_ghost_index = sprites.allOfKind(SpriteKind.Spectre).indexOf(sprite)
    this_ghost_facing = ghost_facing[this_ghost_index]
    if (sprite.isHittingTile(CollisionDirection.Top)) {
        ghost_facing[this_ghost_index] = randint(1, 3)
    } else if (sprite.isHittingTile(CollisionDirection.Bottom)) {
        while (ghost_facing[this_ghost_index] == 1) {
            ghost_facing[this_ghost_index] = randint(0, 3)
        }
    } else if (sprite.isHittingTile(CollisionDirection.Left)) {
        while (ghost_facing[this_ghost_index] == 2) {
            ghost_facing[this_ghost_index] = randint(0, 3)
        }
    } else {
        ghost_facing[this_ghost_index] = randint(0, 2)
    }
    moveGhost(sprite, this_ghost_index)
}
function playerGotHit (damage: number) {
    if (player_invincible == false) {
        player_invincible = true
        info.changeLifeBy(damage * -1)
        for (let index2 = 0; index2 < 20; index2++) {
            mySprite.setFlag(SpriteFlag.Invisible, true)
            mySpriteBodyAndHead.setFlag(SpriteFlag.Invisible, true)
            mySpriteFeet.setFlag(SpriteFlag.Invisible, true)
            mySpriteOuterLayer.setFlag(SpriteFlag.Invisible, true)
            pause(25)
            mySprite.setFlag(SpriteFlag.Invisible, false)
            mySpriteBodyAndHead.setFlag(SpriteFlag.Invisible, false)
            mySpriteFeet.setFlag(SpriteFlag.Invisible, false)
            mySpriteOuterLayer.setFlag(SpriteFlag.Invisible, false)
            pause(25)
        }
        player_invincible = false
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Bat, function (sprite, otherSprite) {
    playerGotHit(1)
})
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    facing = 0
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
    otherSprite.destroy()
    info.changeScoreBy(100)
})
function declareValues () {
    static_image_ghost = [img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fdd111111ddf......
        ......fbdd1dd1ddbf......
        ......fcdd1bb1ddcf......
        .......fb111111bf.......
        ......fffcdb1bdffff.....
        ....ff1fffbfbffff1ff....
        ....f1b1ffffffff1b1f....
        ....fbfbffffffffbfbf....
        .........ffffff.........
        ..........ffff..........
        ........................
        ........................
        ........................
        ........................
        `, img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .......fb111111bf.......
        ......fffcdb1bdffff.....
        ....fc111cbfbfc111cf....
        ....f1b1b1ffff1b1b1f....
        ....fbfbffffffbfbfbf....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `, img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f1111111dbf......
        ......fd1111111ddf......
        ......fd111111dddf......
        ......fd111ddddddf......
        ......fd111ddddddf......
        ......fd1dddddddbf......
        ......fd1dfbddbbff......
        ......fbddfcdbbcf.......
        .....ffffccddbfff.......
        ....fcb1bbbfcffff.......
        ....f1b1dcffffffff......
        ....fdfdf..ffffffffff...
        .....f.f.....ffffff.....
        ........................
        ........................
        ........................
        ........................
        `, img`
        ........................
        ........................
        ........................
        ........................
        ..........fffff.........
        ........ff11111f........
        .......fb111111bf.......
        ......fbd1111111f.......
        ......fddd111111df......
        ......fdddd11111df......
        ......fddddddd11df......
        ......fddddddd111f......
        ......fddddddcf11f......
        .......fbdddb1111bf.....
        ........fffcfdb1b1f.....
        .......ffffffffbfbf.....
        ....ff.fffffffffff......
        .....ffffffff...........
        .....ffffffb1b1f........
        ......ffffffbfbf........
        ........................
        ........................
        ........................
        ........................
        `]
    static_image_hero = [img`
        . . . . . . f f f f . . . . . . 
        . . . . f f e e e e f f . . . . 
        . . . f e e e f f e e e f . . . 
        . . f f f f f 2 2 f f f f f . . 
        . . f f e 2 e 2 2 e 2 e f f . . 
        . . f e 2 f 2 f f 2 f 2 e f . . 
        . . f f f 2 2 e e 2 2 f f f . . 
        . f f e f 2 f e e f 2 f e f f . 
        . f e e f f e e e e f e e e f . 
        . . f e e e e e e e e e e f . . 
        . . . f e e e e e e e e f . . . 
        . . e 4 f f f f f f f f 4 e . . 
        . . 4 d f 2 2 2 2 2 2 f d 4 . . 
        . . 4 4 f 4 4 4 4 4 4 f 4 4 . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f f . . f f . . . . . 
        `, img`
        . . . . . . f f f f . . . . . . 
        . . . . f f f 2 2 f f f . . . . 
        . . . f f f 2 2 2 2 f f f . . . 
        . . f f f e e e e e e f f f . . 
        . . f f e 2 2 2 2 2 2 e e f . . 
        . . f e 2 f f f f f f 2 e f . . 
        . . f f f f e e e e f f f f . . 
        . f f e f b f 4 4 f b f e f f . 
        . f e e 4 1 f d d f 1 4 e e f . 
        . . f e e d d d d d d e e f . . 
        . . . f e e 4 4 4 4 e e f . . . 
        . . e 4 f 2 2 2 2 2 2 f 4 e . . 
        . . 4 d f 2 2 2 2 2 2 f d 4 . . 
        . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f f . . f f . . . . . 
        `, img`
        . . . . f f f f f f . . . . . . 
        . . . f 2 f e e e e f f . . . . 
        . . f 2 2 2 f e e e e f f . . . 
        . . f e e e e f f e e e f . . . 
        . f e 2 2 2 2 e e f f f f . . . 
        . f 2 e f f f f 2 2 2 e f . . . 
        . f f f e e e f f f f f f f . . 
        . f e e 4 4 f b e 4 4 e f f . . 
        . . f e d d f 1 4 d 4 e e f . . 
        . . . f d d d d 4 e e e f . . . 
        . . . f e 4 4 4 e e f f . . . . 
        . . . f 2 2 2 e d d 4 . . . . . 
        . . . f 2 2 2 e d d e . . . . . 
        . . . f 5 5 4 f e e f . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . . . . f f f . . . . . . . 
        `, img`
        . . . . . . f f f f f f . . . . 
        . . . . f f e e e e f 2 f . . . 
        . . . f f e e e e f 2 2 2 f . . 
        . . . f e e e f f e e e e f . . 
        . . . f f f f e e 2 2 2 2 e f . 
        . . . f e 2 2 2 f f f f e 2 f . 
        . . f f f f f f f e e e f f f . 
        . . f f e 4 4 e b f 4 4 e e f . 
        . . f e e 4 d 4 1 f d d e f . . 
        . . . f e e e 4 d d d d f . . . 
        . . . . f f e e 4 4 4 e f . . . 
        . . . . . 4 d d e 2 2 2 f . . . 
        . . . . . e d d e 2 2 2 f . . . 
        . . . . . f e e f 4 5 5 f . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . . . f f f . . . . . . 
        `]
    static_image_hero_lower_hitbox = [img`
        . . . . . e e e e e e . . . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . 4 4 4 4 4 4 . . . . . 
        `, img`
        . . . . . e 4 4 4 4 e . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . 4 4 5 5 4 4 . . . . . 
        `, img`
        . . . . . 4 4 4 e e f . . . . . 
        . . . . . 2 2 e d d 4 . . . . . 
        . . . . . 2 2 e d d e . . . . . 
        . . . . . 5 4 f e e f . . . . . 
        `, img`
        . . . . . f e e 4 4 4 . . . . . 
        . . . . . 4 d d e 2 2 . . . . . 
        . . . . . e d d e 2 2 . . . . . 
        . . . . . f e e f 4 5 . . . . . 
        `]
    static_image_hero_body = [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f 2 2 f f . . . . . 
        . . . . . 2 e 2 2 e 2 . . . . . 
        . . . . . f 2 f f 2 f . . . . . 
        . . . . . 2 2 e e 2 2 . . . . . 
        . . . . . 2 f e e f 2 . . . . . 
        . . . . . f e e e e f . . . . . 
        . . . . . e e e e e e . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e e e e e . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f e e e e f . . . . . 
        . . . . . b f 4 4 f b . . . . . 
        . . . . . 1 f d d f 1 . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e f f e e . . . . . 
        . . . . . 2 2 e e f f . . . . . 
        . . . . . f f f 2 2 2 . . . . . 
        . . . . . e e f f f f . . . . . 
        . . . . . 4 f b e 4 4 . . . . . 
        . . . . . d f 1 4 d 4 . . . . . 
        . . . . . d d d 4 e e . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e f f e e . . . . . 
        . . . . . f f e e 2 2 . . . . . 
        . . . . . 2 2 2 f f f . . . . . 
        . . . . . f f f f e e . . . . . 
        . . . . . 4 4 e b f 4 . . . . . 
        . . . . . 4 d 4 1 f d . . . . . 
        . . . . . e e 4 d d d . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `]
    static_image_hero_outer_layer = [img`
        . . . . . . f f f f . . . . . . 
        . . . . f f e e e e f f . . . . 
        . . . f e e e f f e e e f . . . 
        . . f f f f f 2 2 f f f f f . . 
        . . f f e . . . . . . e f f . . 
        . . f e 2 . . . . . . 2 e f . . 
        . . f f f . . . . . . f f f . . 
        . f f e f . . . . . . f e f f . 
        . f e e f . . . . . . e e e f . 
        . . f e e . . . . . . e e f . . 
        . . . f e . . . . . . e f . . . 
        . . . 4 f . . . . . . f 4 . . . 
        . . . d f . . . . . . f d . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . f f f f . . . . . . 
        . . . . f f f 2 2 f f f . . . . 
        . . . f f f 2 2 2 2 f f f . . . 
        . . f f f e e e e e e f f f . . 
        . . f f e . . . . . . e e f . . 
        . . f e 2 . . . . . . 2 e f . . 
        . . f f f . . . . . . f f f . . 
        . f f e f . . . . . . f e f f . 
        . f e e 4 . . . . . . 4 e e f . 
        . . f e e . . . . . . e e f . . 
        . . . f e . . . . . . e f . . . 
        . . . 4 f . . . . . . f 4 . . . 
        . . . d f . . . . . . f d . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . f f f f f f . . . . . . 
        . . . f 2 f e e e e f f . . . . 
        . . f 2 2 2 f e e e e f f . . . 
        . . f e e e e f f e e e f . . . 
        . f e 2 2 . . . . . . f f . . . 
        . f 2 e f . . . . . . e f . . . 
        . f f f e . . . . . . f f f . . 
        . f e e 4 . . . . . . e f f . . 
        . . f e d . . . . . . e e f . . 
        . . . f d . . . . . . e f . . . 
        . . . f e . . . . . . f . . . . 
        . . . . 2 . . . . . . . . . . . 
        . . . . 2 . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . f f f f f f . . . . 
        . . . . f f e e e e f 2 f . . . 
        . . . f f e e e e f 2 2 2 f . . 
        . . . f e e e f f e e e e f . . 
        . . . f f . . . . . . 2 2 e f . 
        . . . f e . . . . . . f e 2 f . 
        . . f f f . . . . . . e f f f . 
        . . f f e . . . . . . 4 e e f . 
        . . f e e . . . . . . d e f . . 
        . . . f e . . . . . . d f . . . 
        . . . . f . . . . . . e f . . . 
        . . . . . . . . . . . 2 . . . . 
        . . . . . . . . . . . 2 . . . . 
        . . . . . . . . . . . . . . . . 
        `]
    static_image_hero_feet = [img`
        . . e . . . . . . . . . . e . . 
        . . 4 . . . . . . . . . . 4 . . 
        . . 4 4 f . . . . . . f 4 4 . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f f . . f f . . . . . 
        `, img`
        . . e . . . . . . . . . . e . . 
        . . 4 . . . . . . . . . . 4 . . 
        . . 4 4 f . . . . . . f 4 4 . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f f . . f f . . . . . 
        `, img`
        . . . f . . . . . . . . . . . . 
        . . . f . . . . . . . . . . . . 
        . . . f 5 . . . . . . . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . . . . f f f . . . . . . . 
        `, img`
        . . . . . . . . . . . . f . . . 
        . . . . . . . . . . . . f . . . 
        . . . . . . . . . . . 5 f . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . . . f f f . . . . . . 
        `]
    static_image_sword = [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . b . . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        `, img`
        . . . . 4 4 b 1 b . . . . . . . 
        . . . . 4 4 b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . b 1 b . . . . . . . 
        . . . . . . . b . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . b b b b b b b b b b b b 
        . . . b 1 1 1 1 1 1 1 1 1 1 1 1 
        . . . . b b b b b b b b b b b b 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        b b b b b b b b b b b b . . . . 
        1 1 1 1 1 1 1 1 1 1 1 1 b . . . 
        b b b b b b b b b b b b . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `]
    animation_ghost = [[img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbddddddddbf......
        ......fcd1dddd1dcf......
        .......fb111111bf.......
        ......ff1cdb1bd1fff.....
        ....fc111cbfbfc111cf....
        .....11111ffff11111.....
        .....ffbffffffbfbff.....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbddddddddbf......
        ......fcd11dd11dcf......
        .......fb1111111fff.....
        ......ff1cdb1bc111cf....
        ....fc111cbfbf11111.....
        .....11111ffffbfbff.....
        .....ffbfffffff.........
        .........fffff..........
        ..........fff...........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddddddddddf......
        ......fbddddddddbf......
        ......fcd11dd11dcf......
        .......fb111111bf.......
        ......ff1cdb1bd1fff.....
        ....fc111cbfbfc111cf....
        .....11111ffff11111.....
        .....ffbffffffbfbff.....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbddddddddbf......
        ......fc11dddd11cf......
        .....fff111dd11bf.......
        ....fc111cdb1bd1ff......
        .....1111cbfbfc111cf....
        .....ffbfbffff11111.....
        .........fffffffbff.....
        ..........fffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `], [img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .......fb111111bf.......
        ......fffcdb1bdffff.....
        ....fc111cbfbfc111cf....
        ....f1b1b1ffff1b1b1f....
        ....fbfbffffffbfbfbf....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .......fb111111ffff.....
        ......fffcdb1bc111cf....
        ....fc111cbfbf1b1b1f....
        ....f1b1b1ffffbfbfbf....
        ....fbfbfffffff.........
        .........fffff..........
        ..........fff...........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .......fb111111bf.......
        ......fffcdb1bdffff.....
        ....fc111cbfbfc111cf....
        ....f1b1b1ffff1b1b1f....
        ....fbfbffffffbfbfbf....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .....ffff111111bf.......
        ....fc111cdb1bdfff......
        ....f1b1bcbfbfc111cf....
        ....fbfbfbffff1b1b1f....
        .........fffffffbfbf....
        ..........fffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `], [img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f1111111df.......
        ......fd1111111ddf......
        ......fd111111dddf......
        ......fd111ddddddf......
        ......fd1dfbddddbf......
        ......fbddfcdbbbcf......
        .......f11111bbcf.......
        .......f1b1fffff........
        .......fbfc111bf........
        ........ff1b1bff........
        .........fbfbfff.f......
        ..........ffffffff......
        ............fffff.......
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        .........fffff..........
        ........f11111ff........
        .......fb111111bf.......
        .......f1111111dbf......
        ......fd111111dddf......
        ......fd11111ddddf......
        ......fd11dddddddf......
        ......f111dddddddf......
        ......f11fcddddddf......
        .....fb1111bdddbf.......
        .....f1b1bdfcfff........
        .....fbfbffffffff.......
        ......fffffffffff.ff....
        ...........ffffffff.....
        ........f1b1bffffff.....
        ........fbfbffffff......
        ........................
        ........................
        ........................
        ........................
        `], [img`
        ........................
        ........................
        ........................
        ........................
        ..........fffff.........
        ........ff11111f........
        .......fb111111bf.......
        ......fbd1111111f.......
        ......fddd111111df......
        ......fdddd11111df......
        ......fddddddd11df......
        ......fddddddd111f......
        ......fddddddcf11f......
        .......fbdddb1111bf.....
        ........fffcfdb1b1f.....
        .......ffffffffbfbf.....
        ....ff.fffffffffff......
        .....ffffffff...........
        .....ffffffb1b1f........
        ......ffffffbfbf........
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......fd1111111f.......
        ......fdd1111111df......
        ......fddd111111df......
        ......fdddddd111df......
        ......fbddddbfd1df......
        ......fcbbbdcfddbf......
        .......fcbb11111f.......
        ........fffff1b1f.......
        ........fb111cfbf.......
        ........ffb1b1ff........
        ......f.fffbfbf.........
        ......ffffffff..........
        .......fffff............
        ........................
        ........................
        ........................
        ........................
        `]]
    static_image_bat = img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `
    animation_Bat = [[img`
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f c b b c f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f c b b c f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f c b b c f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f c b b c f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f c b b c f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f b b f c b b c f b b f f . 
        . . . f c f c b b c f c f . . . 
        . . . . f f c c c c f f . . . . 
        . . . . . . f f f f . . . . . . 
        `], [img`
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f 2 b b 2 f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f 2 b b 2 f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f 2 b b 2 f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f 2 b b 2 f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . . f b f . . . . f b f . . . 
        . . f b c b f . . f b c b f . . 
        . . f c c b f f f f b c c f . . 
        . . f f c f c b b c f c f f . . 
        . . f . f f 2 b b 2 f f . f . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f . . . . f f . . . . 
        . . f f b b f . . f b b f f . . 
        f f b c c c f f f f c c c b f f 
        . f f f b f c b b c f b f f f . 
        . . . f c f 2 b b 2 f c f . . . 
        . . . f f f c c c c f f f . . . 
        . . . . . . f f f f . . . . . . 
        `], [img`
        . . . . . . . . . f f . . . . . 
        . . . . . . . . . f b f . . . . 
        . . . . . . . . f b c b f . . . 
        . . . . . . f f f b c c f . . . 
        . . . . . f c b c f c f f . . . 
        . . . . . f b 2 b c f . f . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . f f . . . . . 
        . . . . . . . . . f b f . . . . 
        . . . . . . . . f b c b f . . . 
        . . . . . . f f f b c c f . . . 
        . . . . . f c b c f c f f . . . 
        . . . . . f b 2 b c f . f . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . . f b f . . . . 
        . . . . . . . . f b c b f . . . 
        . . . . . . f f f b c c f . . . 
        . . . . . f c b c f c f f . . . 
        . . . . . f b 2 b c f . f . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . . f b f . . . . 
        . . . . . . . . f b c b f . . . 
        . . . . . . f f f b c c f . . . 
        . . . . . f c b c f c f f . . . 
        . . . . . f b 2 b c f . f . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . . f b f . . . . 
        . . . . . . . . f b c b f . . . 
        . . . . . . f f f b c c f . . . 
        . . . . . f c b c f c f f . . . 
        . . . . . f b 2 b c f . f . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . f f . . . . . 
        . . . . . . . . f b b f f . . . 
        . . . . . . f f f c c c b f f . 
        . . . . . f c b c f b f f f . . 
        . . . . . f b 2 b f c f . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `], [img`
        . . . . . f f . . . . . . . . . 
        . . . . f b f . . . . . . . . . 
        . . . f b c b f . . . . . . . . 
        . . . f c c b f f f . . . . . . 
        . . . f f c f c b c f . . . . . 
        . . . f . f c b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . f f . . . . . . . . . 
        . . . . f b f . . . . . . . . . 
        . . . f b c b f . . . . . . . . 
        . . . f c c b f f f . . . . . . 
        . . . f f c f c b c f . . . . . 
        . . . f . f c b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . . f b f . . . . . . . . . 
        . . . f b c b f . . . . . . . . 
        . . . f c c b f f f . . . . . . 
        . . . f f c f c b c f . . . . . 
        . . . f . f c b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . . f b f . . . . . . . . . 
        . . . f b c b f . . . . . . . . 
        . . . f c c b f f f . . . . . . 
        . . . f f c f c b c f . . . . . 
        . . . f . f c b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . . f b f . . . . . . . . . 
        . . . f b c b f . . . . . . . . 
        . . . f c c b f f f . . . . . . 
        . . . f f c f c b c f . . . . . 
        . . . f . f c b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f . . . . . . . . . 
        . . . f f b b f . . . . . . . . 
        . f f b c c c f f f . . . . . . 
        . . f f f b f c b c f . . . . . 
        . . . . f c f b 2 b f . . . . . 
        . . . . . f c c c c f . . . . . 
        . . . . . . f f f f . . . . . . 
        `]]
    beetle_HP = []
    // 0: can be set to randomly fire on GhostMove
    // 1: ready to fire on next ghostMove
    // 2: do not set to fire on ghostMove
    ghost_ready_to_fire = []
    ghost_facing = []
    beetle_skipMove = []
    ghost_movement_interval = 1000
    ghost_shoot_interval = 500
    facing = 1
    swingingSword = false
    kill_count = 0
    player_dead = false
    player_invincible = false
    info.setLife(6)
    info.setScore(0)
    facing = 1
    hasSword = 0
    swordStabDuration = 100
    // this variable can't be changed during gameplay, only here before the start
    swordRefreshDelay = 175
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (hasSword == 1) {
        guardianStatueHealth = 1
    }
    hasSword = 1
})
function moveBeetles () {
    for (let value of sprites.allOfKind(SpriteKind.bug)) {
        if (beetle_skipMove[sprites.allOfKind(SpriteKind.bug).indexOf(value)] == 1) {
            beetle_skipMove[sprites.allOfKind(SpriteKind.bug).indexOf(value)] = 0
            continue;
        }
        if (value.vy != 0 && value.vx != 0 && Math.percentChance(10)) {
            value.setVelocity(0, 0)
        } else if (Math.percentChance(40)) {
            value.setVelocity(0, (randint(0, 1) * 2 - 1) * 30)
        } else if (Math.percentChance(40)) {
            value.setVelocity((randint(0, 1) * 2 - 1) * 30, 0)
        } else if (Math.percentChance(40) || value.vy != 0 && value.vx != 0) {
            value.setVelocity((randint(0, 1) * 2 - 1) * randint(1, 2) * 15, (randint(0, 1) * 2 - 1) * randint(1, 2) * 15)
        } else {
        	
        }
        if (value.vx != 0 || value.vy != 0) {
            animation.runImageAnimation(
            value,
            [img`
                .......ffff.......
                .....ff3333ff.....
                ....f33113133f....
                ...f3333333333f...
                ..f333ffffff333f..
                ..f1ff333333ff1f..
                .ffff33333333ffff.
                .f3f3331133333f3f.
                .f3f33ffffff33f3f.
                f331ff333333ff133f
                f3fff33333333fff3f
                f3f3f33113333f3f3f
                .f3f1f333333f1f3f.
                .f3ffffffffffff3f.
                ..f1ff331133fff1..
                ..1ff33ffff33f1f1.
                ..ff1ff1ff1f1ff1f.
                ...1ff1f1f1ff1ff..
                `,img`
                .......ffff.......
                .....ff3333ff.....
                ....f33113133f....
                ...f3333333333f...
                ..f333ffffff333f..
                ..f1ff333333ff1f..
                .ffff33333333ffff.
                .f3f3331133333f3f.
                .f3f33ffffff33f3f.
                f331ff333333ff133f
                f3fff33333333fff3f
                f3f3f33113333f3f3f
                .f3f1f333333f1f3f.
                .f3ffffffffffff3f.
                ..1fff331133ff1f..
                .1f1f33ffff33ff1..
                .f1ff1f1ff1ff1ff..
                ..ff1ff1f1f1ff1...
                `],
            140,
            true
            )
        } else {
            animation.stopAnimation(animation.AnimationTypes.All, value)
        }
    }
}
function distanceBetween2Sprites (sprite1: Sprite, sprite2: Sprite) {
    return Math.sqrt((sprite1.x - sprite2.x) * (sprite1.x - sprite2.x) + (sprite1.y - sprite2.y) * (sprite1.y - sprite2.y))
}
function playerStabsSpectre (weapon: Sprite, ghost: Sprite) {
    ghost.setVelocity(0, 0)
    index = sprites.allOfKind(SpriteKind.Spectre).indexOf(ghost)
    ghost_facing.removeAt(index)
    ghost_ready_to_fire.removeAt(index)
    if (weapon.kind() != SpriteKind.Projectile) {
        dropCoins(ghost, 100)
    }
    ghost.destroy(effects.disintegrate, 500)
    kill_count += 1
    if (kill_count != 0 && kill_count % 5 == 0) {
        spawnHeart()
    }
}
sprites.onOverlap(SpriteKind.Sword, SpriteKind.Coin, function (sprite, otherSprite) {
    otherSprite.destroy()
    info.changeScoreBy(100)
})
function initializePlayer () {
    mySprite = sprites.create(static_image_hero_lower_hitbox[1], SpriteKind.Player)
    mySpriteBodyAndHead = sprites.create(static_image_hero_body[1], SpriteKind.Player)
    mySpriteOuterLayer = sprites.create(static_image_hero_outer_layer[1], SpriteKind.Player)
    mySpriteFeet = sprites.create(static_image_hero_feet[1], SpriteKind.Player)
    sword = sprites.create(static_image_sword[4], SpriteKind.Sword)
    tiles.placeOnTile(mySprite, tiles.getTileLocation(1, 5))
    mySpriteBodyAndHead.bottom = mySprite.top + 6
    mySpriteBodyAndHead.x = mySprite.x
    mySpriteBodyAndHead.z = 1
    mySpriteFeet.top = mySprite.bottom + 4
    mySpriteFeet.x = mySprite.x
    mySpriteOuterLayer.bottom = mySprite.top + 6
    mySpriteOuterLayer.x = mySprite.x
    mySpriteOuterLayer.z = 1
    scene.cameraFollowSprite(mySprite)
    sword.top = mySprite.bottom - 4
    sword.x = mySprite.x
    controller.moveSprite(mySprite, 80, 80)
    mySpriteBodyAndHead.setFlag(SpriteFlag.GhostThroughWalls, true)
    mySpriteFeet.setFlag(SpriteFlag.GhostThroughWalls, true)
    mySpriteFeet.setFlag(SpriteFlag.GhostThroughSprites, true)
    mySpriteOuterLayer.setFlag(SpriteFlag.GhostThroughWalls, true)
    mySpriteOuterLayer.setFlag(SpriteFlag.GhostThroughSprites, true)
}
function playerOverlapsGuardianStatue () {
    controller.moveSprite(mySprite, 80, 0)
    mySprite.vy = 200
    timer.after(200, function () {
        mySprite.vy = 0
        controller.moveSprite(mySprite, 80, 80)
    })
    if (guardianStatueAwake == 0) {
        info.changeLifeBy(1)
        awakenGuardianStatue()
    } else {
        playerGotHit(1)
    }
}
sprites.onOverlap(SpriteKind.Sword, SpriteKind.Burrowers, function (sprite, otherSprite) {
    playerStabsBurrower(otherSprite)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Burrowers, function (sprite, otherSprite) {
    playerGotHit(sprites.readDataNumber(otherSprite, "type") + 1)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    swingSword()
})
scene.onOverlapTile(SpriteKind.Player, tiles.util.door0, function (sprite, location) {
    if (sprite == mySprite) {
        tiles.loadConnectedMap(ConnectionKind.Door1)
        roomChange(tiles.util.door0)
    }
})
controller.down.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.left.isPressed()) {
        facing = 2
    } else if (controller.right.isPressed()) {
        facing = 3
    } else if (controller.up.isPressed()) {
        facing = 0
    }
})
function playerStabsBat (sprite: Sprite) {
    sprite.setVelocity(0, 0)
    sprite.destroy(effects.disintegrate, 500)
    kill_count_bat += 1
    if (kill_count_bat != 0 && kill_count_bat % 5 == 0) {
        dropCoins(sprite, 100)
    }
}
function setupMapField () {
    tiles.coverAllTiles(tiles.util.door0, assets.tile`myTile25`)
    tiles.coverAllTiles(tiles.util.door2, assets.tile`myTile44`)
    scene.setBackgroundColor(7)
    for (let value of tiles.getTilesByType(sprites.castle.tileDarkGrass3)) {
        coverTile = sprites.create(assets.tile`myTile38`, SpriteKind.Building)
        tiles.placeOnTile(coverTile, value)
        coverTile.z = 0.5
    }
    for (let value of tiles.getTilesByType(sprites.castle.tileDarkGrass2)) {
        coverTile = sprites.create(assets.tile`myTile38`, SpriteKind.Building)
        tiles.placeOnTile(coverTile, value)
        coverTile.z = 0.5
    }
    for (let value of tiles.getTilesByType(sprites.builtin.forestTiles8)) {
        coverTile = sprites.create(assets.tile`myTile27`, SpriteKind.Building)
        tiles.placeOnTile(coverTile, value)
        coverTile.z = 0.5
    }
    if (guardianStatueDead == 0) {
        makeGuardianStatue()
    }
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    facing = 2
})
function playerStabsBurrower (sprite: Sprite) {
    console.log(sprites.readDataNumber(sprite, "hp"))
    sprites.changeDataNumberBy(sprite, "hp", -1)
    sprite.setVelocity(0, 0)
    for (let index2 = 0; index2 < 3; index2++) {
        sprite.setFlag(SpriteFlag.Invisible, true)
        pause(20)
        sprite.setFlag(SpriteFlag.Invisible, false)
        pause(20)
    }
    if (sprites.readDataNumber(sprite, "hp") == 0) {
        sprite.setVelocity(0, 0)
        for (let index2 = 0; index2 < sprites.readDataNumber(sprite, "type") + 1; index2++) {
            dropCoins(sprite, 100)
        }
        kill_count += 1
        if (kill_count != 0 && kill_count % 5 == 0) {
            spawnHeart()
        }
        sprite.destroy(effects.disintegrate, 500)
    } else {
        timer.after(100, function () {
            sprite.follow(mySprite, 30)
        })
        timer.after(20000, function () {
            sprite.follow(null, 20)
        })
    }
}
function ghostFireSpit () {
    for (let this_ghost of sprites.allOfKind(SpriteKind.Spectre)) {
        this_ghost_index = sprites.allOfKind(SpriteKind.Spectre).indexOf(this_ghost)
        if (ghost_ready_to_fire[this_ghost_index] == 1) {
            this_ghost_facing = ghost_facing[this_ghost_index]
            if (ghost_ready_to_fire[this_ghost_index] == 1) {
                this_ghost_facing = ghost_facing[this_ghost_index]
                if (this_ghost_facing == 0) {
                    projectile = sprites.createProjectileFromSprite(img`
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . a f f . . . . . . . 
                        . . . . . a b f f . b . . . . . 
                        . . . . . . b b a f c . . . . . 
                        . . . . . . a c a b b . . . . . 
                        . . . . . . . f f a . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        `, this_ghost, 0, -100)
                } else if (this_ghost_facing == 1) {
                    projectile = sprites.createProjectileFromSprite(img`
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . a f f . . . . . . . 
                        . . . . . a b f f . b . . . . . 
                        . . . . . . b b a f c . . . . . 
                        . . . . . . a c a b b . . . . . 
                        . . . . . . . f f a . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        `, this_ghost, 0, 100)
                } else if (this_ghost_facing == 2) {
                    projectile = sprites.createProjectileFromSprite(img`
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . a f f . . . . . . . 
                        . . . . . a b f f . b . . . . . 
                        . . . . . . b b a f c . . . . . 
                        . . . . . . a c a b b . . . . . 
                        . . . . . . . f f a . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        `, this_ghost, -100, 0)
                } else {
                    projectile = sprites.createProjectileFromSprite(img`
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . a f f . . . . . . . 
                        . . . . . a b f f . b . . . . . 
                        . . . . . . b b a f c . . . . . 
                        . . . . . . a c a b b . . . . . 
                        . . . . . . . f f a . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        `, this_ghost, 100, 0)
                }
                projectile.setFlag(SpriteFlag.DestroyOnWall, true)
                if (Math.percentChance(90)) {
                    ghost_ready_to_fire[this_ghost_index] = 2
                }
                pause(randint(0, 100))
            }
            if (Math.percentChance(90)) {
                ghost_ready_to_fire[this_ghost_index] = 2
            }
            pause(randint(0, 100))
        }
    }
    ghost_shoot_interval = randint(400, 700)
}
function awakenGuardianStatue () {
    guardianStatueAwake = 1
    timer.background(function () {
        while (tiles.getLoadedMap() == map_field && guardianStatueHealth > 0) {
            tiles.placeOnTile(guardianStatue, tiles.getTileLocation(7, 5))
            guardianStatue.y += -13
            animation.runImageAnimation(
            guardianStatue,
            [img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ..................ffffff................
                ................ff22b22fff..............
                ...............ffb22b22bbf..............
                ...............fbbbbbbbbbf..............
                ...............fbbb222bbbf..............
                ................ffb2b2bfff..............
                .................fffffffff..............
                .............ffffbbbbbbbbf..............
                ............ffbbbbbbbbbbbff.............
                ............fbbbbbbbbbbffbf.............
                ............fbbbbfbbbbbbffff............
                ............fbbbbfbbbbbbfbbff...........
                ............fbbbffbbbbbbffbbf...........
                ...........ffbff.fbbbbbbffbbff..........
                ...........fbbf..fbbbbbbffbbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbf...fbbbbbbbfffbf..........
                ...........fbf..ffffffffff.fbf..........
                ...........fbf.ffffffffff..fbf..........
                ...........fbf.fbbbf.fbbff.fbf..........
                ...........fbf.fbbbf.fbbff..fff.........
                ...........fbf.fbbbf..fbff..fbf.........
                ...........fffffbbbf..fbfff.fbf.........
                ..............fbbbbf..fbfbf.fff.........
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                .......f................................
                ....ffffff..............................
                ....fbbbbf..............................
                ....fbbbbff.............................
                ....ffbbbbf.......ffffff................
                .....fbbbbff....ff22b22fff..............
                .....ffbbbbf...ffb22b22bbf..............
                ......fbbbbff..fbbbbbbbbbf..............
                ......ffbbbbf..fbbb222bbbf..............
                .......fbbbbf...ffb2b2bfff..............
                .......ffbbbbf...fffffffff..............
                ........ffbbbffffbbbbbbbbf..............
                .........fbbbbbbbbbbbbbbbff.............
                ..........fbbbbbbbbbbbbffbf.............
                ..........ffffbbbbbbbbbbffff............
                .............fffbbbbbbbbfbbff...........
                ...............ffbbbbbbbffbbf...........
                ................ffbbbbbbffbbff..........
                .................fbbbbbbffbbbf..........
                .................fbbbbbbfffbbf..........
                .................fbbbbbbfffbbf..........
                .................fbbbbbbbfffbf..........
                ................ffffffffff.fbf..........
                ...............ffffffffff..fbf..........
                ...............fbbbf.fbbff.fbf..........
                ...............fbbbf.fbbff..fff.........
                ...............fbbbf..fbff..fbf.........
                ..............ffbbbf..fbfff.fbf.........
                ..............fbbbbf..fbfbf.fff.........
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ...................ffff.................
                .................fffbbffff..............
                .................fbbfbbfbff.............
                .................fbbbfbbfbf.............
                .................ffbbbbbbffff...........
                ..................ffbbbbbfbbfff.........
                ..............ffffffffbfffbbbbff........
                ............ffbbbbbffffffffffbbf........
                ............fbbbbbbbbbbbbffbffbf........
                ............ffbbbbbbbbbbbbbbbfff........
                .............ffffffbbbbbbbbbbbf.........
                ..............fbbbfffbbbbbbbbbff........
                ..............fbbbbbbffffbbbbbbf........
                ..............ffffffffffffbbbbbbf.......
                ...............fbbfffffffffbbbbbf.......
                ...............ffbbf.fbbffffbbbbbf......
                ...............fbbbf.fbbffffbbbbbff.....
                ...............fbbbf..fbfffbbbbbbbff....
                ..............ffbbbf..fbfffbbbbbbbbf....
                ..............fbbbbf..fbfbfbbbbbbbbff...
                ..............fbbbff..fbffffbbbbbbbbf...
                ..............fbbbf...fbffffbbbbbbbbf...
                ..............fbbbf...fbfbffbbbbbbbbf..f
                ..............fbbff...fffbffbbbbbbbbf...
                ............ffffff.....ffffffbbfbfbbbf..
                ........................fffbbbbfbffbbf..
                ....................f....fbbbbbfbbfbbf..
                .........................fbbfbbbfbffbff.
                ........................ffbbbbbbfbbfbbf.
                .....................f...ffbbbbbffbfbbf.
                .........................ffbbbbbbfbffbf.
                ..........................fbfbbbbfbbfbf.
                .........................ffbbbbbbffbfbf.
                ...........................ffbbbbbfbffff
                ......................f.....ffbbbbfbbfbf
                .............................ffbbbfbbfbf
                .....................f.....f..fffffbbbff
                .................................ffffff.
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ..................ffffff................
                ................ff22b22fff..............
                ...............ffb22b22bbf..............
                ...............fbbbbbbbbbf..............
                ...............fbbb222bbbf..............
                ................ffb2b2bfff..............
                .................fffffffff..............
                .............ffffbbbbbbbbf..............
                ............ffbbbbbbbbbbbff.............
                ............fbbbbbbbbbbffbf.............
                ............fbbbbfbbbbbbffff............
                ............fbbbbfbbbbbbfbbff...........
                ............fbbbffbbbbbbffbbf...........
                ...........ffbff.fbbbbbbffbbff..........
                ...........fbbf..fbbbbbbffbbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbf...fbbbbbbbfffbf..........
                ...........fbf..ffffffffff.fbf..........
                ...........fbf.ffffffffff..fbf..........
                ...........fbf.fbbbf.fbbff.fbf..........
                ...........fbf.fbbbf.fbbff..fff.........
                ...........fbf.fbbbf..fbff..fbf.........
                ...........fffffbbbf..fbfff.fbf.........
                ..............fbbbbf..fbfbf.fff.........
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ................................f.......
                ..............................ffff......
                .............................ffbbfff....
                .............................fbbffbff...
                ............................ffbbbbbf....
                ............................fbbbbbff....
                ............................fbbbbff.....
                ............................fbbbff......
                ..................ffffff...ffbbbf.......
                ................ff22b22fff.fbbbff.......
                ...............ffb22b22bbf.fbbbf........
                ...............fbbbbbbbbbf.fbbbf........
                ...............fbbb222bbbf.fbbbf........
                ................ffb2b2bfffffbbff........
                .................ffffffffffbbbf.........
                .............ffffbbbbbbbbfbbbff.........
                ............ffbbbbbbbbbbbbbbbf..........
                ............fbbbbbbbbbbfbbbff...........
                ............fbbbbfbbbbbbffff............
                ............fbbbbfbbbbbbff..............
                ............fbbbffbbbbbbf...............
                ...........ffbff.fbbbbbbf...............
                ...........fbbf..fbbbbbbf...............
                ...........fbbf..fbbbbbbff..............
                ...........fbbf..fbbbbbbff..............
                ...........fbf...fbbbbbbbf..............
                ...........fbf..ffffffffff..............
                ...........fbf.ffffffffff...............
                ...........fbf.fbbbf.fbbff..............
                ...........fbf.fbbbf.fbbff..............
                ...........fbf.fbbbf..fbff..............
                ...........fffffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ...............ffffff...................
                ..............ffbbfbfff.................
                ..............fbbfbbfbf.................
                ..............fbfbbfbbf.................
                ..............ffbbfbbbff................
                ...............fbbbbbfffff..............
                ...........fffffffbbbbfbbff.............
                ..........ffbbbbbffffffbfbff............
                ..........fbbbbbbbfffffffbbff...........
                ..........fbbbbffffbbbbbbbbbf...........
                ..........fbbfffbbbbbbbbbbbbf...........
                ..........fbbfbbbbbbbbbbbbfff...........
                ..........fbffbbbbbbbbfffff.............
                ..........fffbbbbbfffffbff..............
                ..........ffbbbbfffbbbbbbf..............
                ..........fbbbbbfbbbbbbbbf..............
                .........ffbbbbfffffffffff..............
                .........fbbbbbffffffffff...............
                ........fbbbbbffbbbf.fbbff..............
                .......ffbbbbfffbbbf.fbbff..............
                .......fbbbbbbbfbbbf..fbff..............
                ...f..ffbbbbbbbfbbbf..fbfff.............
                .....ffbbbbbbbfbbbbf..fbfbf.............
                .....fbbbbbfbbfbbbff..fbffff............
                .f..ffbbbbbbbbfbbbf...fbbfff............
                ....fbbbbbbbbbfbbbf...fbbbff............
                ...fbbbbbbbbbbfbbff...ffbbff............
                ..ffbbbbbbbbffffff.....ffffff...........
                ..fbbbbbbbbbbff.........................
                ..fbbbfbbffbbf..........................
                ..fbbffbbfbbbf..........................
                .fbbbfbbfbbbff..f.......................
                .fbbffbffbbbf...........................
                .fbbfbbfbbbbf....f......................
                .fbbfbbfbbbbff..........................
                .fbbfbbfbbbbff..........................
                .fbffbbfbbbbbf.....f....................
                .fbfbbbfbbbbbf..f.......................
                .fbfbbbfbbbbbf..........................
                .fffbbbfbbbbff..........................
                ...ffffbbbfff..f........................
                ......fffff.............................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ..................ffffff................
                ................ff22b22fff..............
                ...............ffb22b22bbf..............
                ...............fbbbbbbbbbf..............
                ...............fbbb222bbbf..............
                ................ffb2b2bfff..............
                .................fffffffff..............
                .............ffffbbbbbbbbf..............
                ............ffbbbbbbbbbbbff.............
                ............fbbbbbbbbbbffbf.............
                ............fbbbbfbbbbbbffff............
                ............fbbbbfbbbbbbfbbff...........
                ............fbbbffbbbbbbffbbf...........
                ...........ffbff.fbbbbbbffbbff..........
                ...........fbbf..fbbbbbbffbbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbbf..fbbbbbbfffbbf..........
                ...........fbf...fbbbbbbbfffbf..........
                ...........fbf..ffffffffff.fbf..........
                ...........fbf.ffffffffff..fbf..........
                ...........fbf.fbbbf.fbbff.fbf..........
                ...........fbf.fbbbf.fbbff..fff.........
                ...........fbf.fbbbf..fbff..fbf.........
                ...........fffffbbbf..fbfff.fbf.........
                ..............fbbbbf..fbfbf.fff.........
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                .................1......................
                .................1...1..................
                ...........1.....1..11..................
                ...........111...1...1..................
                .............11..1...11..11.............
                .........1....11..1...11.1..............
                .........1111111..1....1111.............
                ..............11111.......1.......ff....
                .....fffff.....1.........11.....fffff...
                .....ffbbfff...1..fffff11......ffbfff...
                .....ffffbbf...11f22b2211f...ffbfffbff..
                ......fbffbbf..f1122b2211f..ffbbfbbff...
                ......fbbfbbff.fb11bbb11bffffbbbbbff....
                ......ffbbbbbf.fbb12221bbffbbbbbbff.....
                .......ffbbbbff.ffb2b2bfffbbbbbfff......
                ........fbbbbbff.fffffffffbbbbff........
                ........ffbbbbbffbbbbbbbbfbbff..........
                .........fffbbbbbbbbbbbbbbbff...........
                ...........fffbbbbbbbbbbbbff............
                .............fffffbbbbbbff..............
                ................ffbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbff..............
                .................fbbbbbbbf..............
                ................ffffffffff..............
                ...............ffffffffff...............
                ...............fbbbf.fbbff..............
                ...............fbbbf.fbbff..............
                ...............fbbbf..fbff..............
                ..............ffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                .............11...11....................
                ..............1.....11..1...............
                ...............1.....111.....1..........
                ...............11....11..1.11...........
                .............11.111..11..11.1...........
                ..............11..1111.11..1............
                ...............1...11.11...1............
                ..............111111..1.1111......ff....
                .....fffff.....11......1........fffff...
                .....ffbbfff...1..fffff11......ffbfff...
                .....ffffbbf...11f22b2211f...ffbfffbff..
                ......fbffbbf..f1122b2211f..ffbbfbbff...
                ......fbbfbbff.fb11bbb11bffffbbbbbff....
                ......ffbbbbbf.fbb12221bbffbbbbbbff.....
                .......ffbbbbff.ffb2b2bfffbbbbbfff......
                ........fbbbbbff.fffffffffbbbbff........
                ........ffbbbbbffbbbbbbbbfbbff..........
                .........fffbbbbbbbbbbbbbbbff...........
                ...........fffbbbbbbbbbbbbff............
                .............fffffbbbbbbff..............
                ................ffbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbf...............
                .................fbbbbbbff..............
                .................fbbbbbbbf..............
                ................ffffffffff..............
                ...............ffffffffff...............
                ...............fbbbf.fbbff..............
                ...............fbbbf.fbbff..............
                ...............fbbbf..fbff..............
                ..............ffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ..................11....................
                .................11......11.............
                ...............1...11.1111..............
                .............1111111..1.1...............
                ...............11......1................
                ............11.1..fffff11...............
                .............1.11f22b2211f..............
                ...............f1122b2211f..............
                ...............fb11bbb11bf..............
                ...............fbb12221bbf..............
                ................ffb2b2bfff..............
                ...............f.ffbbbffff..............
                .............ffffbbfffbbbfff............
                .......fffffffbbbbbbbbbbbbbffff.........
                .....fffbbbbbbbbbbbbbbbbbbbffbfff.......
                ....ffbbbbbbffbbbbbbbbbbbbffbbbbfff.....
                ....fbffbbbbffffffbbbbbbffffbbbbbbff....
                ....fffbbbbbf...ffbbbbbbf..ffbbbbbbff...
                ....ffbbbfff.....fbbbbbbf...fbbbbbbbf...
                .....fbff........fbbbbbbf...ffbbbffff...
                .....fff.........fbbbbbbf....ffffbbff...
                .................fbbbbbbf.......ffff....
                .................fbbbbbbff..............
                .................fbbbbbbbf..............
                ................ffffffffff..............
                ...............ffffffffff...............
                ...............fbbbf.fbbff..............
                ...............fbbbf.fbbff..............
                ..............ffbbbf..fbff..............
                ..............ffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ............fffbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ...............1...11.11................
                ..............111111..1.1...............
                ............1..11......1....11..........
                .............111..fffff11.11............
                ...............11f22b22111..............
                ...............f1122b2211f..............
                ...............fb11bbb11bf..............
                ...............fbb12221bbf..............
                ................ffb2b2bfff..............
                ..............fffff2b2ffff..............
                ...........ffffbfbbfffbbbfff............
                .........fffbbbbbbbbbbbbbbbffff.........
                ......fffbbbffbbbbbbbbbbbbffbbfff.......
                ......fbbbbbffffffbbbbbbffffbbbbff......
                .....ffbbbbbfff.ffbbbbbbf.fffbbbbff.....
                ....ffbbbbbff....fbbbbbbf..ffbbbbbfff...
                ...ffbfbbbbf.....fbbbbbbf..ffbbbbbbbff..
                ..fbbffbffff.....fbbbbbbf..fbbbbbfbbbf..
                ..fbffbff........fbbbbbbf..ffbbbbffbbf..
                ..fffbbf.........fbbbbbbf...fffbbbffff..
                ...ffbff.........fbbbbbbbf....ffbbbbbf..
                ....fff.........ffffffffff.....ffbbbbf..
                ...............ffffffffff.......ffbbbf..
                ...............fbbbf.fbbff.......ffbbf..
                ...............fbbbf.fbbff........ffff..
                ...............fbbbf..fbff..............
                ..............ffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                .............ffbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `,img`
                ..............111.......................
                ................11......................
                .................1.....1................
                .................1.....1................
                ...........1..1..11...111.....11........
                ...........11.1...1..11.1.....11........
                ...........111....11.1..11...11.........
                .........111.............1...11.........
                ..........11.............1...11.........
                ...........11...............111.........
                ..........1111....ffffff....111.........
                ............11..ff22b22fff..1...........
                ............11.ffb22b22bbf.111..........
                .............1111bbbbbbbb11111..........
                ..............1fb1b2221111.11...........
                ................ffb2b2bfff..............
                .................fffffffff..............
                .............ffffbbbbbbbbf..............
                ............ffbbbbbbbbbbbbf.............
                ............fbbbbbbbbbbffbf.............
                ............fbbbbfbbbbbbfbbf............
                ............fbbbbfbbbbbbfbbff...........
                ............fbbbffbbbbbbffbbf...........
                ...........ffbbfffbbbfffffbbff..........
                ...........fbbbbfffffffbbbbbbf..........
                ...........fbbbbbbbbbbfbbbbbbf..........
                ...........ffffffffffffbffffff..........
                .................fbbbbffff..............
                ................ffffffffff..............
                ...............ffffffffff...............
                ...............fbbbf.fbbff..............
                ...............fbbbf.fbbff..............
                ...............fbbbf..fbff..............
                ..............ffbbbf..fbfff.............
                ..............fbbbbf..fbfbf.............
                ..............fbbbff..fbffff............
                ..............fbbbf...fbbfff............
                ..............fbbbf...fbbbff............
                ..............fbbff...ffbbff............
                ............ffffff.....ffffff...........
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                ........................................
                `],
            500,
            false
            )
            animation.runMovementAnimation(
            guardianStatue,
            animation.animationPresets(animation.shake),
            1000,
            true
            )
            timer.after(4500, function () {
                if (guardianStatueHealth > 0) {
                    guardianFlame = sprites.createProjectileFromSprite(img`
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . c c . . . . . . 
                        . . . . . c a a a a . . . . . . 
                        . . . . . a a f f b a . . . . . 
                        . . . . c a b f f c b . . . . . 
                        . . . . c b b b a f c b . . . . 
                        . . . . c b a c a b b b . . . . 
                        . . . . . b b f f a a c . . . . 
                        . . . . . . a a b b c . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        `, guardianStatue, 0, 0)
                    animation.runImageAnimation(
                    guardianFlame,
                    [img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        .......................................222222...................................
                        .....................................222222222..................................
                        ...................................22222222222..................................
                        .................................22222222522222.................................
                        ..............................2222222..55555552.................................
                        ..............................2222255..5555.5522................................
                        .............................22225555555555555522...............................
                        .............................222255555555555555222..............................
                        ............................2244455555555555555222..............................
                        .......................2....24444554444555555554442.............................
                        ...........................2444445544445555555544422............................
                        ..........................2544445554444.555555544422............................
                        .........................2254444555444445555555444422...2.......................
                        .........................2524445554444445555555444442...........................
                        .........................25244455444444455555554444442..........................
                        ........................225444454444444455444555224442..........................
                        ........................2544444444444455.4444555224444..........................
                        ........................2444444444444454444445555244442.........................
                        ........................244444444444445444444255522444..........................
                        ......................2.244444444444455444444255522444..........................
                        .......................22444222244444554444442255224442..2......................
                        .......................22244222244455554444242255524442.........................
                        .......................2224422224445555444.244255424442.........................
                        .......................22222222444455554442244255424422.........................
                        .......................222222224444552244424445554244222........................
                        ......................22222222244455222242.444555424422.........................
                        ......................2.2222222444552222244444222424452.........................
                        ......................2.22222222455522242444442222244222...2....................
                        ........................22222222555222222444444.22244222........................
                        ......................2222222222255222222444444422224222........................
                        ......................2222224222222225222444444442222222........................
                        .......................222224.22222225555444244442222222........................
                        .......................222244422222224554444245522222222........................
                        .......................22224444222222455422224554222222.........................
                        ......................22.224444422222222422224554222222.........................
                        ...................2..2..222444422222222222244544222............................
                        ..................2..22..2244442222244442224444442222.....2.....................
                        .....................2...24444222222444422244444422.22..........................
                        ....................22..224442222224444222242424222.22..........................
                        ....................2...2.4422222244442222222224222..2...2......................
                        ...................2...22.422222244..42422222224222..22.........................
                        ...................2...22..2222244...42222222244222...22........................
                        ......................222.2222224...442222.2.2442222..22........................
                        ......................22....2224....44222..2224422.2..22........................
                        .....................2.2....222....242222..2244422.2..22........................
                        ....................2.2...2222.....24222...22.4422.2............................
                        .....................22....222...2224222...2224422..2...........................
                        ....................22......2.22.222222..222222222..2.....2.....................
                        ....................2...2..22...2222222...222.24222.2...........................
                        ..........................222...222.222...222.24222.............................
                        ...............................22...2...222..22422.2............................
                        ...............................2....2...22....4422.2............................
                        .............................2..2...........2...................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `,img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        .......................................222222...................................
                        .....................................222222222..................................
                        ...................................22222222222..................................
                        .................................22222222522222.................................
                        ..............................22222225555555552.................................
                        ..............................222225555555555522................................
                        ..............................222255555555555552................................
                        ......................2.......222555555555555552................................
                        ............................222255555555555555522...............................
                        ...........................22222255555554555552222222...........................
                        .........................22222222555252445555252222222..2.......................
                        .......................22222222255555544425555252222222.........................
                        ......................2222222222255244444225555522222222........................
                        ......................2222222225554444442445555552222222........................
                        ................2.....22224422454422424422445555552222222......2................
                        ......................222442244525224244422455555522222222......................
                        ......................2224424522552442244424555555522222222.....................
                        ......................2224225222522442442444425555552222222.....................
                        .....................222245552255242444254424225555552222222....................
                        .....................222445222255424222554424222555552222222....................
                        .....................2224252225544242245522242222555555222222...................
                        ...................2.22244222255424424555242552222555555222222..................
                        .....................222242225555242445552425552222555554222.22.................
                        ....................2222242255555222455552245552222255544422222.................
                        ....................22222422555552224555522425552222555244444422................
                        ...........2.....2..222244225555522445555224255552222555544244422...............
                        .................2.222224222555542242555522425555222255552444444222.............
                        ................2222222442225554422422555524255522222255544224442222............
                        ...............222222224242255545224225555242555222222255542224444222...........
                        ...............22222222444224454522225555522455522242225554422444444222.........
                        ..............2.22222244442244444222255555224555222422255544222242444222........
                        .............22222222244222244454222255555224455222422245544224.444444222.......
                        ............22.2224222442224444444222455422224552222222455442224424444..........
                        ...........22.22244222442224444444222455422224554222522445444222442424..........
                        .............2.224222244224444444422245442222455422252224444422224442...........
                        .............22244222244224444444422244422224454422222222455422222.444..........
                        ...........2.222222222442224444444222444222244544222252224554422222..44.........
                        ..........22224422222444222..444442224442222445444222522244524222.222..44.......
                        ........2...4442222444422244.444422224442224454444222422224544222...222.4.2.....
                        ........2.2242222244442.244.44444222244422244544422224422244442222....222.......
                        ..........2.2.222244422224..44442222444422244544422222424224444222.......22.....
                        .........2.2.2222244224244.444422222444422244544422222.44222444222..............
                        ...........2..22244424444..444422224444422244444422242224422244222.22...........
                        ..........22.222444224.42.4444222244444422244444422244224422244422..2...........
                        ..........2.2222442244442.44422222444444222444442222442224222244222......2......
                        .........2.2222442244442224422222444444422244.4422224452242222.442222..2..2.....
                        ..........22224422244.22224422224444444422244.442224444224422224222222....2.....
                        .........2222442224442222242222444444442222444442224444224422224422222..2.......
                        ..........2224.22444.22222422224444444222224444422244442244422224222.22.........
                        ..........2....22444.22222422224444444222244444422244422244422224422..22........
                        ........22...222424.222222422244444442222244444422244422222442222422.2..........
                        ........22...22442.2222222422244.44.422224444.442224442222224.2224222.22........
                        ........2...224222.222.222422244.4..422242224.442224442222.2242222422..2........
                        ...........224422...222224422244.4..422242222.442224442222..2242224422..........
                        ...........22422....22.224422224.4..422242222.4422244442222...2222.4222.........
                        .............222...222222242222..4..42224222..442224444222.....222.44222........
                        ............2......2..222242222.4..44.224422.4442224444222....2.2...............
                        ............222.2..2..22222422.....44..2442..2442224444422..2.2.22......2.......
                        ..................22...2222222.2..4.2..2442...442.24444422..22..2.2.............
                        ..................2....222224..2..4.22.2442...242.22444422..22..2...............
                        ........................2.222.2..2..2..2244...242.22444422...2..22..............
                        ........................2222.....4.222..244....42.2244442........22..2..........
                        ........................2222.....2.222..224....42.2222442........22.............
                        ........................222222..2..222...22....222.222222...22....2.............
                        ...........................2.......22..........2.222.222.......2................
                        ...............................................2..22..22........................
                        ............................................2......22.22........................
                        ....................................................2...........................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `,img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        ......................................2222222...................................
                        ....................................2222222222..................................
                        ...................................22222222222..................................
                        .................................22222222222222.................................
                        ..............................22222222222222222.................................
                        ..............................222222252252222222................................
                        ..............................222225225555222222................................
                        ..............................222522255555552222................................
                        .......................2....222222555555555552222...............................
                        ................2..........2222225555555525552222...............................
                        .........................2222222255525244425522222..............................
                        .........................22222225555554424555522222.............................
                        ........................222222225552244224255552222.............................
                        .......................22222225525522422244555522222............................
                        ...................2...22222555525224444224552552222............................
                        ......................2.22225252252244222244555522222...........................
                        .....................22222255552552242222224455522222.......2...................
                        .....................2422.255522522222222222455522222...........................
                        ................2...2222225552255222222252224555552222..........................
                        ....................2222225552255222222552224525552222..........................
                        ...................2222222552255522222255222555555222222........................
                        ...................22222255222555222255552225552555224222.....2.................
                        .................222224455222555522225555222555555522422222.....................
                        ................22222445552255555222255552225555525524222222....................
                        ...............22.222455522255555222255552222555522554222222....................
                        ..............22.2222455222255555222255552222555522255222222.....22.............
                        .............22.222244552222555542222555522225555222255222222.....22............
                        .............2222.2445544222555442222255552225552222255555222222...22...........
                        ............22...2245544222255545222225555222555222225225552222.................
                        ................2245554222244554522225555522255522242252255222222.22............
                        ..............22.2455542224444544222255555222555222422552555222222.....22.......
                        ............222.2245.542224244554222255555222555222422252255522222......2.......
                        ..........22.2..242554422244444544222455422224552222222.55.5522222..22..........
                        ........222.2222245554222244444544222455422224554222522.255.5522222..2..........
                        ...........22222.25524222244444544222455422224554222552222555552222..2..........
                        ..........22...22222222224444455442224452222445442552522222255552222.....2......
                        .........22....22222222244442454442224452222445442252522222255555222...2........
                        ........2.....2222222224442224544422245522224454442525222222552222222...........
                        ......2......22222244444422225544222245422244544442522222222225222222..2........
                        .............22224442244422225444224245422244544422522442422225222222...2.......
                        ............2.2224222444222255442224444422244544422522442442222222222...........
                        ...........2222224224442222444422244444422244544422522444244442222222...........
                        .........222222244242442222444422444444422244444422542222222444222222...........
                        ........22..2224422224422244442224444444222444444222442222222444222222..........
                        ......22.22.2444222444222.44422244444444222444442222442222222244422.2.2.........
                        ......222422242224442222224422244444444422244.4422224452222222244422.22.........
                        .......22224442224222222224422244422444422244.44222444422222222444422.2.........
                        .........222222224222222.2422244422444422224444422244442222222224444422.........
                        ........2.22222222222222.242222422222422222444442224444222222222244444422.......
                        ........2222.22.222222222242222222222422224444442224442222222222224444.4........
                        .........2.222222222222222422222242422..2244444422244422222222222224444.4.......
                        .........2.222222222222222422222242.22.2.4444.4422244422222222222222.44422......
                        ..........2222..2222222222422222.22.22.2..224.442224.422222222222222224422......
                        ..........222...2222222224422224.2..22.2..222.44222...2222..22.22222..242.......
                        ...........2...2.222222..4222224.2..22.24.222244222....2222..222.222...222......
                        ...........2..222222.22...42222.22..22224..2.224222.4...22.....2...2....2.......
                        ..............2.2..2.22....2222.4..422224.22.2222.2.4....2.....222.22...2.......
                        .............2.22..2.22....422.....42222..2..2422...4...22..2....222.2...2......
                        ...............22.2..2......22.2..4.22.2..22.2222...4..222...2....22..2..2......
                        ..............222.2.2......222.2..4.22.2...2.2222...4...22...2.....22...........
                        .................22.2......2222..2..2..22..222242...4...22....2....222..........
                        ..................2........2.2...4.222..2...222.................................
                        ...........................2.....2.222..22...2.......2..........................
                        .............................2..2..222..22..2.......22....2.....................
                        .......................22..2.2.....22...2...22.2.....2..........................
                        ..........................22.2..22..22.22..222..................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `,img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        ......................................2222222...................................
                        ....................................2222222222..................................
                        ...................................22222222222..................................
                        .................................22222222222222.................................
                        ..............................22222222222222222.................................
                        ..............................222222252252222222................................
                        ..............................222225225555222222................................
                        ..............................222522255555552222................................
                        ..............................2222555555555552222...............................
                        ..............................2225555555525552222...............................
                        .............................222255525222225522222..............................
                        ............................22225555552222555522222..2..........................
                        ...........................222222552222222255552222.............................
                        ...........................2222225522222222555522222............................
                        ...........................2222225222222222552252222............................
                        ...........................22222252222222225552522222...........................
                        ........................2.222222552222222222555522222...........................
                        ..........................222222522222222222555522222...........................
                        .........................22222255222222252225555552222..2.......................
                        .........................22222255222222552225525552222..........................
                        ........................2222225552222225522255555522222.........................
                        ....................2...2222225552222555522255525252242.........................
                        ........................2222255552222555522255555252242.........................
                        ........................2222555552222555522255555222242.........................
                        .....................22.22225555522225555222255552222422........................
                        .....................2..2222555552222555522225555222222.........................
                        .....................2..2222555542222555522225555222222.........................
                        .....................2.22222555442222255552225552222222.........................
                        ....................22.22222555452222255552225552222222..22.....................
                        ....................2.222222455452222555552225552224222...22....................
                        ....................2.422222445442222555552225552224222....22...................
                        ....................2.422222445542222555552225552224224.....22..................
                        ..................22.4422224444544222455422224552222224.44...2..................
                        .................222.4.222244445442224554222245542225224.44.....................
                        ................222.4..242444445442224554222245542225524........................
                        ................222222.44444445544222445222244544255252.4..4....................
                        .................2222.442424445444222445222244544225252.442.44..................
                        ................22.44442442..454442224552222445444252524.422..4.................
                        .................444...2222.2554422224542224454444252224...22.2.................
                        .................22...2222.225444224245422244544422522.44...2.2.................
                        ...............222.24222422255442224444422244544422522..44...2..................
                        ..............2...224..442.444422244444422244544422522...44...2.................
                        ................2222.2422224444224444444222444444225422224....2.................
                        .................22444222.444422244444442224444442224422244...2.................
                        .............2.22244..222.444222444444442224444422224422224...2.................
                        .............2.22.....2.224422244444444422244.4422224452222...2.................
                        ............22.22.22..22224422244422444422244.4422244442222.....................
                        ...........22.22.22...22.2422244422444422224444422244442222.......222...........
                        ..........22..222....22..2422224222224222224444422244442222...2.....22..........
                        ..............22....22..22422222222224222244444422244422222....2................
                        .............22.2..24.2.22422222242422..224444442224442222.....22...............
                        ............22..2.2242..22422222242.22.2.4444.442224442222.44...2...............
                        ...............22224...222422222.22.22.2..224.442224.42222..4....2..............
                        ............2..2.244..2224422224.2..22.2..222.44222...2222..4422.2..............
                        ............2.....4...22.4222224.2..22.24.222244222....2222..2.2................
                        ...........2......4.2222..42222.22..22224..2.224222.4...22......2...............
                        ...................22.2....2222.4..422224.22.2222.2.4....2.......2..............
                        ..................2...24...422.....42222..2..2422...4...22.......22.............
                        ..............2222..........22.2..4.22.2..22.2222...4..222.....2..2.............
                        .............2..2..4...44..222.2..4.22.2...2.2222.2.4...22.....2................
                        ..................22.444...2222..2..2..22..222242.222.2.22.....2................
                        ...................2.4.....2.2...4.222..2...22222...222.22......................
                        ....................4422...222...2.222..22..22.22....2..22......................
                        ...................222.....222..2..222..22..22.22...22..222.....................
                        .......................22..222.....22...22..22.222.2.2..2.2.....................
                        .......................2..2222..22..22.222.222..2222...2222.....................
                        ......................22222.....22...2.2..22222....22.22........................
                        .....................................22.......2.....2...........................
                        ......................................2.........................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `,img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        .......................................222222...................................
                        .....................................222222222..................................
                        ...................................22222222222..................................
                        .................................22222222222222.................................
                        ..............................22222222522222252.................................
                        ..............................222222225222552222................................
                        ..............................222225255225555252................................
                        ..............................222255552555555222................................
                        ..............................2255555225555555222...............................
                        ..............................2225555555525552222...............................
                        .............................222255525555225522222..............................
                        ............................22225555555555555522222.............................
                        ...........................222222552252555255522222.............................
                        ...........................2222225522255552555522222.2..........................
                        ...........................2222225222255552555552222............................
                        ...........................22222252255555225555522222...........................
                        ..........................222222552255522222555522222...........................
                        ..........................222222522555222222555552222...........................
                        .........................22222255225522222225555522222..........................
                        .........................22222255222222252225545522222..........................
                        .......................22222225552222222222255555522222.........................
                        ........................2222225552222552222255455522242.2.......................
                        ........................2222255552222552222255445522242.........................
                        ........................2222525552222552222255545522242.........................
                        ........................22225255522222552222255455222422........................
                        ........................2222255552222255222225545522222.........................
                        ........................2222255542222255522225545522222.........................
                        ........................2222255442222255522225544222222.........................
                        ........................2222255452222255522225552222222.........................
                        ......................222222245452222555552225552224222.........................
                        ......................222222444442222555552225552224222.........................
                        .......................22222444542222555552225552224222.........................
                        .......................22224444444222455422224552222222...2.....................
                        .......................22224444444222455422224554222522.........................
                        .......................22244444444222454422224554222552.........................
                        .......................22244444445222444222244544222252.........................
                        .......................22224444445222444222244544222252.........................
                        ....................2..2222..44445222444222244544422252.........................
                        .......................2222..44445222444222445444422222....2....................
                        ........................22..44444522244422244544422222..........................
                        .......................22...44445522444422244544422222..........................
                        .......................22..444422222444422244544422222..........................
                        .......................2...444422224444422244444422242222.......................
                        .......................22.4444222244442422244444422244222.......................
                        .......................22.4442222244424422244444222244222.......................
                        ........................224422222444244422244.44222244522.......................
                        .......................2224422224422444422244.44222444422.......................
                        .......................2.24222244424244222244444222444422.......................
                        .........................24222244244242222244444222444422.2.....................
                        ........................2242222422442422224444442224442.2.2.....................
                        ........................2242224444444222224444442224442.........................
                        ........................22422244.44.422224444.442224442.........................
                        ........................22422244.4..422242224.442224442.........................
                        ........................24422244.4..422242222.442224442.........................
                        .......................224422224.4..422242222.442224444..2......................
                        .........................242222..4..42224222..442224444..2......................
                        .........................242222.4..44.224422.4442224444.........................
                        ..........................2422.....44..2442..2442224444.........................
                        ..........................2222.2..4.2..2442...442.2444...2......................
                        ......................2...224..2..4.22.2442...242.2244...2......................
                        .......................2..222.2..2..2..2244...242.224...22......................
                        ..........................22.....4.222..244....42.224...2.......................
                        ..........................22.....2.222..224....42.22...42.......................
                        ...........................222..2..222..222....222.222.22.......................
                        .........................2.222...2.22...2222...2.222.222........................
                        .......................2..2222..22...2..2222...2..22..22........................
                        ......................22...22...22........222......22.22........................
                        ......................................2.............2...........................
                        ...................................2..........2.................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `,img`
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        .......................................222......................................
                        .......................................2222.....................................
                        .......................................222222...................................
                        .....................................222222222..................................
                        ...................................22222222222..................................
                        .................................22222222522222.................................
                        ..............................2222222..55555552.................................
                        ..............................2222255..5555.5522................................
                        .............................22225555555555555522...............................
                        .............................222255555555555555222..............................
                        ............................2244455555555555555222..............................
                        ............................24444554444555555554442.............................
                        ...........................2444445544445555555544422............................
                        ..........................2544445554444.555555544422............................
                        .........................2254444555444445555555444422...........................
                        .........................2524445554444445555555444442...........................
                        .........................25244455444444455555554444442..........................
                        ........................225444454444444455444555224442..........................
                        ........................2544444444444455.4444555224444..........................
                        ........................2444444444444454444445555244442.........................
                        ........................244444444444445444444255522444..........................
                        ........................244444444444455444444255522444..........................
                        .......................22444222244444554444442255224442.........................
                        .......................22244222244455554444242255524442.........................
                        .......................2224422224445555444.244255424442.........................
                        .......................22222222444455554442244255424422.........................
                        .......................222222224444552244424445554244222........................
                        ......................22222222244455222242.444555424422.........................
                        ......................2.2222222444552222244444222424452.........................
                        ......................2.22222222455522242444442222244222........................
                        ........................22222222555222222444444.22244222........................
                        .....................22222222222255222222444444422224222........................
                        ......................2222224222222225222444444442222222........................
                        .......................222224.22222225555444244442222222....2...................
                        .......................222244422222224554444245522222222........................
                        ........................2224444222222455422224554222222.........................
                        .....................2...224444422222222422224554222222..2......................
                        .........................222444422222222222244544222............................
                        ..........................22244442222222222244544222............................
                        ...........................2244422222444222244544222...2........................
                        .....................2....22244222222444222245444222............................
                        ..........................222442222224442222454442222...........................
                        ..........................224424222244442222454442222...........................
                        .........................2224422222224442222454442222...2.......................
                        ..................2......2244442222244442224444442222...........................
                        .......................2.24444222222444422244444422.22..........................
                        .........................24442222224444222242424222.22..........................
                        ..........................4422222244442222222224222..2....2.....................
                        ..........................422222244..42422222224222..22.........................
                        .....................2.....2222244...42222222244222...2.........................
                        .................2........2222224...442222.2.2442222..2.........................
                        ............................2224....44222..2224422.2..2.........................
                        ............................222....242222..2244422.2..2.........................
                        ..........................2222.....24222...22.4422.2............................
                        .......................2...222...2224222...2224422..2...........................
                        ............................2.22.222222...22222222..2...........................
                        ...........................22...2222222...222.24222.2...........................
                        ..........................222...222.222...222.24222.............................
                        ...............................22...2...222..22422.2............................
                        ...............................2....2...22....4422.2............................
                        ................................2...............................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................2...............................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        ................................................................................
                        `],
                    200,
                    false
                    )
                    for (let index2 = 0; index2 < 22; index2++) {
                        guardianFlame.top = guardianStatue.top - 1
                        guardianFlame.x = guardianStatue.x - 1
                        pause(50)
                    }
                    guardianFlame.destroy()
                }
            })
            pause(6000)
        }
    })
}
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.left.isPressed()) {
        facing = 2
    } else if (controller.up.isPressed()) {
        facing = 0
    } else if (controller.down.isPressed()) {
        facing = 1
    }
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.right.isPressed()) {
        facing = 3
    } else if (controller.up.isPressed()) {
        facing = 0
    } else if (controller.down.isPressed()) {
        facing = 1
    }
})
sprites.onOverlap(SpriteKind.Spectre, SpriteKind.Boss, function (sprite, otherSprite) {
    ghost_facing[sprites.allOfKind(SpriteKind.Spectre).indexOf(sprite)] = 1
    moveGhost(sprite, sprites.allOfKind(SpriteKind.Spectre).indexOf(sprite))
})
function playerStabsBeetle (sprite: Sprite) {
    index = sprites.allOfKind(SpriteKind.bug).indexOf(sprite)
    beetle_HP[index] = beetle_HP[index] - 1
    if (beetle_HP[sprites.allOfKind(SpriteKind.bug).indexOf(sprite)] == 0) {
        dropCoins(sprite, 100)
        sprite.setVelocity(0, 0)
        sprite.destroy(effects.disintegrate, 500)
        beetle_HP.removeAt(index)
        kill_count += 1
        if (kill_count != 0 && kill_count % 5 == 0) {
            spawnHeart()
        }
    } else {
        beetle_skipMove[index] = 1
        delta = -1 * (100 / Math.sqrt((mySprite.x - sprite.x) ** 2 + (mySprite.y - sprite.y) ** 2))
        sprite.setVelocity((mySprite.x - sprite.x) * delta, (mySprite.y - sprite.y) * delta)
        for (let index2 = 0; index2 < 3; index2++) {
            sprite.setFlag(SpriteFlag.Invisible, true)
            pause(20)
            sprite.setFlag(SpriteFlag.Invisible, false)
            pause(20)
        }
    }
}
function makeGhost () {
    ghost = sprites.create(static_image_ghost[1], SpriteKind.Spectre)
    tiles.placeOnRandomTile(ghost, sprites.castle.tilePath5)
    i = 0
    while (distanceBetween2Sprites(mySprite, ghost) < 64) {
        i += 1
        tiles.placeOnRandomTile(ghost, sprites.castle.tilePath5)
        if (player_dead == true || i > 30) {
            break;
        }
    }
    this_ghost_index = sprites.allOfKind(SpriteKind.Spectre).indexOf(ghost)
    ghost_ready_to_fire[this_ghost_index] = 2
    ghost_facing[this_ghost_index] = randint(0, 3)
    ghost.setBounceOnWall(false)
    moveGhost(ghost, this_ghost_index)
}
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.chestClosed, function (sprite, location) {
    if (sprite == mySprite) {
        chestLocation = location
        treasureChest()
    }
})
function roomChange (doorType: Image) {
    DestroyAllTheThings()
    tiles.placeOnRandomTile(mySprite, doorType)
    if (tiles.getLoadedMap() == map_field) {
        scene.setBackgroundColor(7)
        if (doorType == tiles.util.door0 || doorType == tiles.util.door2) {
            mySprite.y += 16
        }
        setupMapField()
    } else if (tiles.getLoadedMap() == map_cave1) {
        guardianStatueAwake = 0
        scene.setBackgroundColor(15)
        makeBats()
        mySprite.y += -16
        tiles.coverAllTiles(tiles.util.door0, assets.tile`myTile9`)
        if (hasSword == 1) {
            tiles.replaceAllTiles(sprites.dungeon.chestClosed, sprites.dungeon.chestOpen)
        }
    } else if (tiles.getLoadedMap() == map_field2) {
        scene.setBackgroundColor(7)
        tiles.coverAllTiles(tiles.util.door0, sprites.castle.tileGrass1)
        tiles.coverAllTiles(tiles.util.door1, sprites.castle.tileGrass1)
        tiles.coverAllTiles(tiles.util.door2, sprites.castle.tileGrass1)
        tiles.coverAllTiles(tiles.util.door8, sprites.castle.tileGrass1)
        tiles.coverAllTiles(tiles.util.door10, sprites.castle.tileGrass1)
        tiles.coverAllTiles(assets.tile`myTile14`, sprites.castle.tileGrass1)
        if (doorType == tiles.util.door0 || doorType == tiles.util.door1) {
            mySprite.x += 16
        } else if (doorType == tiles.util.door2) {
            mySprite.y += -16
        } else if (doorType == tiles.util.door8) {
            mySprite.y += 16
        } else if (doorType == tiles.util.door10) {
            mySprite.x += -16
        }
        for (let index2 = 0; index2 < 10; index2++) {
            makeGhost()
        }
        makeAllBeetles(sprites.castle.tilePath5)
        moveBeetles()
    } else if (tiles.getLoadedMap() == map_mountainPath) {
        scene.setBackgroundColor(13)
        tiles.coverAllTiles(tiles.util.door0, sprites.castle.tileGrass1)
        tiles.coverAllTiles(sprites.dungeon.darkGroundCenter, sprites.castle.tilePath5)
        for (let index2 = 0; index2 < 4; index2++) {
            makeAllBurrowers(sprites.dungeon.darkGroundCenter)
        }
        if (doorType == tiles.util.door0) {
            mySprite.x += -16
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.bug, function (sprite, otherSprite) {
    playerGotHit(1)
})
function dropCoins (deadEnemy: Sprite, value: number) {
    timer.after(150, function () {
        timer.background(function () {
            for (let index2 = 0; index2 < Math.ceil(value / 100); index2++) {
                money = sprites.create(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, SpriteKind.Coin)
                money.setPosition(deadEnemy.x + randint(-4, 4), deadEnemy.y + randint(0, -10))
                money.z = 0.8
                animation.runImageAnimation(
                money,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . f 1 1 5 5 f . . . . . 
                    . . . . f 1 1 5 5 5 5 f . . . . 
                    . . . . f 1 5 5 5 5 5 f . . . . 
                    . . . . f 5 5 5 5 5 e f . . . . 
                    . . . . f 5 5 5 5 e e f . . . . 
                    . . . . . f 5 5 e e f . . . . . 
                    . . . . f f f f f f f f . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . f 1 1 5 5 f . . . . . 
                    . . . . f 1 1 5 5 5 5 f . . . . 
                    . . . . f 1 5 5 5 5 5 f . . . . 
                    . . . . f 5 5 5 5 5 e f . . . . 
                    . . . . f 5 5 5 5 e e f . . . . 
                    . . . . . f 5 5 e e f . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . f f f f f f f f . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 5 f 5 e f . . . . . 
                    . . . . . f 5 f e e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 5 f 5 e f . . . . . 
                    . . . . . f 5 f e e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 1 f . . . . . . 
                    . . . . . f 1 1 f 5 f . . . . . 
                    . . . . . f 1 5 f 5 f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 1 f 5 f . . . . . 
                    . . . . . f 1 5 f 5 f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . f f f f . . . . . . 
                    . . . . . f 1 1 5 5 f . . . . . 
                    . . . . f 1 1 5 5 5 5 f . . . . 
                    . . . . f 1 5 5 5 5 5 f . . . . 
                    . . . . f 5 5 5 5 5 e f . . . . 
                    . . . . f 5 5 5 5 e e f . . . . 
                    . . . . . f 5 5 e e f . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . f f f f f f f f . . . . 
                    `,img`
                    . . . . . . f f f f . . . . . . 
                    . . . . . f 1 1 5 5 f . . . . . 
                    . . . . f 1 1 5 5 5 5 f . . . . 
                    . . . . f 1 5 5 5 5 5 f . . . . 
                    . . . . f 5 5 5 5 5 e f . . . . 
                    . . . . f 5 5 5 5 e e f . . . . 
                    . . . . . f 5 5 e e f . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . f f f f f f f f . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . f 1 1 5 5 f . . . . . 
                    . . . . f 1 1 5 5 5 5 f . . . . 
                    . . . . f 1 5 5 5 5 5 f . . . . 
                    . . . . f 5 5 5 5 5 e f . . . . 
                    . . . . f 5 5 5 5 e e f . . . . 
                    . . . . . f 5 5 e e f . . . . . 
                    . . . . . . f f f f . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . f f f f f f f f . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 5 f 5 e f . . . . . 
                    . . . . . f 5 f e e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 1 f 5 5 f . . . . . 
                    . . . . . f 5 f 5 e f . . . . . 
                    . . . . . f 5 f e e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 5 f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . f f f f . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 1 f 5 f . . . . . 
                    . . . . . f 1 5 f 5 f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . . f 1 5 f . . . . . . 
                    . . . . . f 1 1 f 5 f . . . . . 
                    . . . . . f 1 5 f 5 f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . f 5 5 f e f . . . . . 
                    . . . . . . f 5 e f . . . . . . 
                    . . . . . . . f f . . . . . . . 
                    . . . . . f f f f f f . . . . . 
                    `],
                randint(20, 40),
                true
                )
                pause(25)
            }
        })
    })
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    facing = 3
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    if (otherSprite == guardianFlame) {
        playerGotHit(2)
    } else {
        otherSprite.destroy()
        playerGotHit(1)
    }
})
function makeBats () {
    for (let index2 = 0; index2 < 10; index2++) {
        bat = sprites.create(static_image_bat, SpriteKind.Bat)
        tiles.placeOnRandomTile(bat, assets.tile`myTile10`)
        bat.setBounceOnWall(true)
        i = 0
        while (distanceBetween2Sprites(mySprite, bat) < 64) {
            i += 1
            tiles.placeOnRandomTile(bat, assets.tile`myTile10`)
            if (player_dead == true || i > 30) {
                break;
            }
        }
        animation.runImageAnimation(
        bat,
        animation_Bat[1],
        randint(180, 220),
        true
        )
    }
}
controller.A.onEvent(ControllerButtonEvent.Released, function () {
    controller.moveSprite(mySprite, 100, 100)
})
scene.onOverlapTile(SpriteKind.Player, tiles.util.door2, function (sprite, location) {
    if (sprite == mySprite) {
        tiles.loadConnectedMap(ConnectionKind.Door2)
        roomChange(tiles.util.door2)
    }
})
function youDied () {
    if (player_dead != true) {
        controller.moveSprite(mySprite, 0, 0)
        mySprite2 = sprites.create(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................2222............................................................................................................................................
            .....222........2222............................................................................................................................................
            .....2222......22222...................2222................................................................................................222..................
            .....2222.....22222..........222222....22222........222....................................................................................222..................
            .....2222....222222..........22222222..22222........222.....................................222............................................222..................
            ......222....222222.........222222222...2222........222.............22222222222.............222...22222222................................2222..................
            ......222...22222.2.......222222222222..2222........222.............222222222222............222...2222222222222222...222222................222..................
            ......222..22222.........2222222..2222..2222........222.............222222222222............222...2222222222222222...22222222..............222..................
            ......222..22222........22222222..22222..222........222.............222..2..222222..........222...222..22222222222...2222222222............222..................
            ......222222222........222222..2...2222..222........222.............222..2...222222.........222...222....22.....2....22222222222...........222..................
            ......222222222.......222222.......2222..222.......2222.............222..2..2.222222........222...222...........2....2222..2222222.........222..................
            ......22222222........2222.2........222..222.......2222.............222.....2..22222........222...222...........2....2222...2222222........222..................
            ......22222222.......22222.2........222..222........222.............222.........22222.......222...222.................222..22.222222.......222..................
            .....222222222......22222..2........222..2222.......222.............222.........222222......222...222.................222...2..222222......2222.................
            .....2.222222.......2222...........2222..2222.......222.............2222.........22222......222...222.................222.......22222......2222.................
            .......2222222.....22222...........2222..2222.......222.............2222..........2222......222...222.................222........22222.....2222.................
            ........222222.....22222...........2222...222.......222.............2222...........2222.....222...222222222222222.....222.........22222.....222.................
            ..........2222.....22222...........2222...222.......222..............222...........2222.....222...222222222222222.....222.........22222.....222.................
            ..........2222.....222.2...........2222...222.......222..............222............222....2222...222222222222222.....222.........22222.....222.................
            ..........2222.....2222............2222...222.......222..............222............222....2222...222..2....2...2.....222.........2.222.....2222................
            ..........222......2222............2222...222.......222..............222............222....2222...222..2....2.........222........22.222.....2222................
            ..........222......2222...........22222...222.......222..............222............222....222....222.......2.........222...........222.....222.................
            ..........222.....22222...........22222...222.......222..............222...........2222....222....222......22.........222...........222.....222.................
            ..........222.....222222..........2222....2222.....2222..............222.........222222....222.2..222.................222..........2222.....222.................
            ..........222.....2.2222..........2222....2222.....2222..............2222.......222222.....222....222.................222..........2222.....222.................
            ..........222.....2222222.........2222....22222...22222..............2222.....22222222.....2222...222.................222.........22222.....2222................
            ..........222.....2.22222........2222......222222222222..............2222..2222222222......2222...222.................222.......222222......2222................
            ..........222........22222.......2222......222222222222...............222222222222..2......2222...22222222222222222...2222....22222222......2222................
            ..........222........222222.....22222.......222222222.2...............2222222222....2.......222...22222222222222222...2222..22222222............................
            .........2222........222222222.222222.......2..22222.22...............22222222..........222.222...22222222222222222....2222222222222............................
            .........2222..........222222222222.2......22........2...............22222..................2.....222222....2..........2222222222..2........2222................
            .........2222............2222222222.2......22........2...............2..............................2..2....2..........22222222.....2.......2222................
            .........2222............2.2222222..2................................22.............................2..2......................2....22.......2222................
            .........2222............2............................................2.............................2.........................2..............2..................
            .........2222............2....2.....................................................................22..........................................................
            ..........222.................2......................................................................2..........................................................
            ..........222...................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `, SpriteKind.Text)
        mySprite2.setPosition(scene.cameraProperty(CameraProperty.X) + 8, scene.cameraProperty(CameraProperty.Y) - 46)
        mySprite2.z = 100
    }
    player_dead = true
    timer.after(10, function () {
        game.over(false)
    })
}
controller.up.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.left.isPressed()) {
        facing = 2
    } else if (controller.right.isPressed()) {
        facing = 3
    } else if (controller.down.isPressed()) {
        facing = 1
    }
})
sprites.onOverlap(SpriteKind.Sword, SpriteKind.bug, function (sprite, otherSprite) {
    playerStabsBeetle(otherSprite)
})
sprites.onOverlap(SpriteKind.Spectre, SpriteKind.Projectile, function (sprite, otherSprite) {
    if (otherSprite == guardianFlame) {
        kill_count += -1
        playerStabsSpectre(otherSprite, sprite)
    }
})
sprites.onOverlap(SpriteKind.Sword, SpriteKind.Spectre, function (sprite, otherSprite) {
    playerStabsSpectre(sprite, otherSprite)
})
sprites.onOverlap(SpriteKind.Sword, SpriteKind.Boss, function (sprite, otherSprite) {
    if (tiles.getLoadedMap() == map_field) {
        playerStabsGuardianStatue(otherSprite)
    }
})
function swingSword () {
    if (hasSword == 1 && !(swingingSword)) {
        swingingSword = true
        sword.setImage(static_image_sword[facing])
        pause(swordStabDuration)
        sword.setImage(static_image_sword[4])
    } else if (hasSword == 0) {
        mySpriteOuterLayer.say("I have no weapon", 800)
    }
}
function moveGhost (this_ghost1: Sprite, this_ghost_index1: number) {
    this_ghost_facing = ghost_facing[this_ghost_index1]
    this_ghost1.setImage(static_image_ghost[this_ghost_facing])
    animation.runImageAnimation(
    this_ghost1,
    animation_ghost[this_ghost_facing],
    250,
    true
    )
    if (this_ghost_facing == 0) {
        this_ghost1.setVelocity(0, -40)
    } else if (this_ghost_facing == 1) {
        this_ghost1.setVelocity(0, 40)
    } else if (this_ghost_facing == 2) {
        this_ghost1.setVelocity(-40, 0)
    } else {
        this_ghost1.setVelocity(40, 0)
    }
    ghost_facing[this_ghost_index1] = randint(0, 3)
}
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    facing = 1
})
scene.onOverlapTile(SpriteKind.Player, sprites.castle.tileDarkGrass2, function (sprite, location) {
    if (sprite == mySprite) {
        if (tiles.locationXY(location, tiles.XY.column) == 4 && tiles.locationXY(location, tiles.XY.row) == 3) {
            teleport(10, 3)
        } else if (tiles.locationXY(location, tiles.XY.column) == 9 && tiles.locationXY(location, tiles.XY.row) == 3) {
            teleport(3, 3)
        }
    }
})
function playerStabsGuardianStatue (otherSprite: Sprite) {
    if (guardianStatueAwake == 1) {
        guardianStatueHealth += -1
        for (let index2 = 0; index2 < 3; index2++) {
            otherSprite.setFlag(SpriteFlag.Invisible, true)
            pause(20)
            otherSprite.setFlag(SpriteFlag.Invisible, false)
            pause(20)
        }
        if (guardianStatueHealth == 0) {
            tiles.setWallAt(tiles.getTileLocation(7, 3), false)
            if (guardianFlame) {
                guardianFlame.destroy()
            }
            dropCoins(otherSprite, 2000)
            otherSprite.destroy(effects.disintegrate, 500)
            guardianStatueDead = 1
            for (let index2 = 0; index2 < 2; index2++) {
                heart = sprites.create(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c 2 2 . 2 2 2 . . . . . . 
                    . . c 2 2 2 2 2 2 4 2 . . . . . 
                    . . c 2 2 2 2 2 4 2 2 . . . . . 
                    . . c 2 2 2 2 2 2 2 2 . . . . . 
                    . . . c 2 2 2 2 2 2 . . . . . . 
                    . . . c 2 2 2 2 2 2 . . . . . . 
                    . . . . c 2 2 2 2 . . . . . . . 
                    . . . . . c 2 2 . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, SpriteKind.Food)
                tiles.placeOnTile(heart, tiles.getTileLocation(7, 4))
                heart = sprites.create(img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c 2 2 . 2 2 2 . . . . . . 
                    . . c 2 2 2 2 2 2 4 2 . . . . . 
                    . . c 2 2 2 2 2 4 2 2 . . . . . 
                    . . c 2 2 2 2 2 2 2 2 . . . . . 
                    . . . c 2 2 2 2 2 2 . . . . . . 
                    . . . c 2 2 2 2 2 2 . . . . . . 
                    . . . . c 2 2 2 2 . . . . . . . 
                    . . . . . c 2 2 . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `, SpriteKind.Food)
                tiles.placeOnTile(heart, tiles.getTileLocation(7, 3))
            }
        }
    } else {
        awakenGuardianStatue()
    }
}
sprites.onOverlap(SpriteKind.bug, SpriteKind.bug, function (sprite, otherSprite) {
    sprite.vx = sprite.vx * -1
    sprite.vy = sprite.vy * -1
    otherSprite.vx = otherSprite.vx * -1
    otherSprite.vy = otherSprite.vy * -1
})
info.onLifeZero(function () {
    youDied()
})
controller.A.onEvent(ControllerButtonEvent.Repeated, function () {
    controller.moveSprite(mySprite, 10, 10)
})
function spawnHeart () {
    heart = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . c 2 2 . 2 2 2 . . . . . . 
        . . c 2 2 2 2 2 2 4 2 . . . . . 
        . . c 2 2 2 2 2 4 2 2 . . . . . 
        . . c 2 2 2 2 2 2 2 2 . . . . . 
        . . . c 2 2 2 2 2 2 . . . . . . 
        . . . c 2 2 2 2 2 2 . . . . . . 
        . . . . c 2 2 2 2 . . . . . . . 
        . . . . . c 2 2 . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Food)
    tiles.placeOnRandomTile(heart, sprites.castle.tilePath5)
    i = 0
    while (distanceBetween2Sprites(mySprite, heart) < 32 || distanceBetween2Sprites(mySprite, heart) > 80) {
        i += 1
        tiles.placeOnRandomTile(heart, sprites.castle.tilePath5)
        if (i % 2 == 0) {
            tiles.placeOnRandomTile(heart, assets.tile`myTile45`)
        }
        if (player_dead == true || i > 30) {
            break;
        }
    }
}
function makeAllBurrowers (spawnTile: Image) {
    tiles.createSpritesOnTiles(spawnTile, SpriteKind.Burrowers)
    for (let value of sprites.allOfKind(SpriteKind.Burrowers)) {
        if (Math.percentChance(60)) {
            animation.runImageAnimation(
            value,
            [img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 4 . . . . . . . . . . 
                . . . . . . 4 . . . 4 . . . . . 
                . . . . . 4 4 . 4 4 . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . 4 . . . . . . . 
                . . . . . . . . 4 . . 4 . . . . 
                . . . . 4 . . . 4 . . 4 . . . . 
                . . . . 4 4 . 4 . . 4 . . . . . 
                . . . . . . 4 . . . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . 4 . . . . . . . . . 
                . . . . . . . 4 . 4 . . . . . . 
                . . . . . . 4 4 . 4 . 4 4 4 . . 
                . . . . 4 4 . 4 . . 4 . . . . . 
                . . . 4 . . 4 . . . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . 4 . . . . . . . . 4 . . 
                . . . . . 4 . . 4 4 . . 4 . . . 
                . . 4 . . 4 . . . 4 . 4 . . . . 
                . . . 4 4 4 4 . . . 4 . . 4 . . 
                . . . . . . 4 . 4 . 4 . 4 . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . 4 2 . . . . 
                . . . 4 4 . . . 4 . 4 . . . 2 . 
                . . . . 4 . . . 4 4 4 . . 4 . . 
                . . . . 4 4 . . . 4 4 4 4 4 . . 
                . . 2 4 . 4 4 . . . 4 . . . . . 
                . . . 4 4 4 4 . 4 . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . 4 . . . . 
                . . . . . . 4 . . . . 4 . . . . 
                . . 4 4 . . 4 4 . . . 4 . . . . 
                . . . 4 4 . . 4 4 4 4 4 4 4 4 . 
                . . . . 4 4 . . . . 4 . . . . 4 
                . 4 4 . . 4 . . 4 . 4 . . . . . 
                . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . 4 2 . . . . 
                . . . 4 4 . . . 4 . 4 . . . 2 . 
                . . . . 4 . . . 4 4 4 . . 4 . . 
                . . . . 4 4 . . . 4 4 4 4 4 . . 
                . . 2 4 . 4 4 . . . 4 . . . . . 
                . . . 4 4 4 4 . 4 . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                . . 4 5 4 4 5 4 4 5 4 4 5 4 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . 4 . . . . . . . . 
                . . . . . . 4 . . . . 4 4 4 . . 
                . . . . . 4 . 4 . . . 4 . . . . 
                . . . . 4 . . . . . 4 4 4 4 . . 
                . . . . 4 4 . . . . 4 . . 4 . . 
                . . 4 . . 4 . . 4 . 4 . . . . . 
                . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . . . . . . . 
                . . . 4 4 . . 4 . . . 2 . . . . 
                . . . . 4 . . 4 4 4 4 . . . . . 
                . . . . 4 4 . . . 4 4 4 4 4 . . 
                . . 2 . . 4 4 . . . 4 . . . 4 . 
                . . . 4 4 4 4 2 4 . 4 . . . 2 . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . 4 . . . . 
                . . . . . . 4 . . . . 4 . . . . 
                . . 4 4 . . 4 4 . . . 4 . . . . 
                . . . 4 4 . . 4 4 4 4 4 4 4 4 . 
                . . . . 4 4 . . . . 4 . . . . 4 
                . 4 4 . . 4 . . 4 . 4 . . . . . 
                . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . 4 2 . . . . 
                . . . 4 4 . . . 4 . 4 . . . 2 . 
                . . . . 4 . . . 4 4 4 . . 4 . . 
                . . . . 4 4 . . . 4 4 4 4 4 . . 
                . . 2 4 . 4 4 . . . 4 . . . . . 
                . . . 4 4 4 4 . 4 . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 4 4 5 4 4 5 4 4 5 4 . . 
                . . 5 4 4 5 4 4 5 4 4 5 4 4 5 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . 4 . . . 4 4 . . . 
                . . 4 4 . . . 4 . . . . 4 4 . . 
                . . . 4 4 . . 4 . 4 4 . . 4 . . 
                . . . . 4 4 4 4 . 4 4 . . 4 4 . 
                . . . . . 4 4 . . 4 . . . 4 . . 
                . . . . 4 4 4 . . 4 . 4 4 4 . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . 4 . . . . . . . . . . . 
                . . 2 . 4 4 . 4 . 2 . . 4 . . . 
                . . . 4 . . . . 4 . . 4 4 . . . 
                . . . 4 . . . 4 4 4 . 4 . . . . 
                . . . 4 4 4 4 4 . 4 4 4 4 2 2 . 
                . 4 4 . . . . 4 . . 4 . . . . . 
                . . . 4 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . 4 . . . . . . . . 
                . . . . . . 4 . . . . 4 4 4 . . 
                . . . . . 4 . 4 . . . 4 . . . . 
                . . . . 4 . . . . . 4 4 4 4 . . 
                . . . . 4 4 . . . . 4 . . 4 . . 
                . . 4 . . 4 . . 4 . 4 . . . . . 
                . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . 4 2 . . . . 
                . . . 4 4 . . . 4 . 4 . . . 2 . 
                . . . . 4 . . . 4 4 4 . . 4 . . 
                . . . . 4 4 . . . 4 4 4 4 4 . . 
                . . 2 4 . 4 4 . . . 4 . . . . . 
                . . . 4 4 4 4 . 4 . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                . . 4 5 4 4 5 4 4 5 4 4 5 4 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . 4 . . . . . . . . 
                . . . . . . 4 . . . . 4 4 4 . . 
                . . . . . 4 . 4 . . . 4 . . . . 
                . . . . 4 . . . . . 4 4 4 4 . . 
                . . . . 4 4 . . . . 4 . . 4 . . 
                . . 4 . . 4 . . 4 . 4 . . . . . 
                . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . 2 . . . . . . 
                . . . . 2 . . . . 4 . 2 4 . . . 
                . . 4 4 . . . . . 4 . . 4 . . . 
                . . 4 . . . . . . 4 . . 4 . . . 
                . . 4 4 4 4 4 . 4 4 . . 4 4 . . 
                . . . . . . 4 . 4 . . . 4 . . . 
                . . . . . 4 4 . 4 . . 4 4 . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                . . . . . 4 4 5 4 4 5 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . 4 . . . . . . . . 4 . . 
                . . . . . 4 . . 4 4 . . 4 . . . 
                . . 4 . . 4 . . . 4 . 4 . . . . 
                . . . 4 4 4 4 . . . 4 . . 4 . . 
                . . . . . . 4 . 4 . 4 . 4 . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . 4 4 4 4 4 4 4 4 4 . . . 
                . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . 4 . . . . . . . 
                . . . . . . . . 4 . . 4 . . . . 
                . . . . 4 . . . 4 . . 4 . . . . 
                . . . . 4 4 . 4 . . 4 . . . . . 
                . . . . . . 4 . . . 4 . . . . . 
                . . . . . 4 4 . 4 4 4 4 . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 4 . . . . . . . . . . 
                . . . . . . 4 . . . 4 . . . . . 
                . . . . . 4 4 . 4 4 . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `],
            200,
            false
            )
            sprites.setDataNumber(value, "type", 0)
            sprites.setDataNumber(value, "hp", 3)
        } else {
            animation.runImageAnimation(
            value,
            [img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . a . . . . . . . . . . 
                . . . . . . a . . . a . . . . . 
                . . . . . a a . a a . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . a . . . . . . . 
                . . . . . . . . a . . a . . . . 
                . . . . a . . . a . . a . . . . 
                . . . . a a . a . . a . . . . . 
                . . . . . . a . . . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . a . . . . . . . . . 
                . . . . . . . a . a . . . . . . 
                . . . . . . a a . a . a a a . . 
                . . . . a a . a . . a . . . . . 
                . . . a . . a . . . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . a . . . . . . . . a . . 
                . . . . . a . . a a . . a . . . 
                . . a . . a . . . a . a . . . . 
                . . . a a a a . . . a . . a . . 
                . . . . . . a . a . a . a . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . a 2 . . . . 
                . . . a a . . . a . a . . . 2 . 
                . . . . a . . . a a a . . a . . 
                . . . . a a . . . a a a a a . . 
                . . 2 a . a a . . . a . . . . . 
                . . . a a a a . a . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . a . . . . 
                . . . . . . a . . . . a . . . . 
                . . a a . . a a . . . a . . . . 
                . . . a a . . a a a a a a a a . 
                . . . . a a . . . . a . . . . a 
                . a a . . a . . a . a . . . . . 
                . . a a a a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . 7 a a 7 a a 7 a a 7 a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . a 2 . . . . 
                . . . a a . . . a . a . . . 2 . 
                . . . . a . . . a a a . . a . . 
                . . . . a a . . . a a a a a . . 
                . . 2 a . a a . . . a . . . . . 
                . . . a a a a . a . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a a 7 a a 7 a a 7 a a . . 
                . . a 7 a a 7 a a 7 a a 7 a a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . a . . . . . . . . 
                . . . . . . a . . . . a a a . . 
                . . . . . a . a . . . a . . . . 
                . . . . a . . . . . a a a a . . 
                . . . . a a . . . . a . . a . . 
                . . a . . a . . a . a . . . . . 
                . . a a a a a . a a a a . . . . 
                . a . . a a a a a a a a a . . . 
                . . . 7 a a 7 a a 7 a a 7 a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . . . . . . . 
                . . . a a . . a . . . 2 . . . . 
                . . . . a . . a a a a . . . . . 
                . . . . a a . . . a a a a a . . 
                . . 2 . . a a . . . a . . . a . 
                . . . a a a a 2 a . a . . . 2 . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . a . . . . 
                . . . . . . a . . . . a . . . . 
                . . a a . . a a . . . a . . . . 
                . . . a a . . a a a a a a a a . 
                . . . . a a . . . . a . . . . a 
                . a a . . a . . a . a . . . . . 
                . . a a a a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a a 7 a a 7 a a 7 a a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . a 2 . . . . 
                . . . a a . . . a . a . . . 2 . 
                . . . . a . . . a a a . . a . . 
                . . . . a a . . . a a a a a . . 
                . . 2 a . a a . . . a . . . . . 
                . . . a a a a . a . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a a a 7 a a 7 a a 7 a . . 
                . . 7 a a 7 a a 7 a a 7 a a 7 . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . a . . . a a . . . 
                . . a a . . . a . . . . a a . . 
                . . . a a . . a . a a . . a . . 
                . . . . a a a a . a a . . a a . 
                . . . . . a a . . a . . . a . . 
                . . . . a a a . . a . a a a . . 
                . . . . a a a a a a a a a . . . 
                . . . a a 7 a a 7 a a 7 a a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . a . . . . . . . . . . . 
                . . 2 . a a . a . 2 . . a . . . 
                . . . a . . . . a . . a a . . . 
                . . . a . . . a a a . a . . . . 
                . . . a a a a a . a a a a 2 2 . 
                . a a . . . . a . . a . . . . . 
                . . . a a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . a . . . . . . . . 
                . . . . . . a . . . . a a a . . 
                . . . . . a . a . . . a . . . . 
                . . . . a . . . . . a a a a . . 
                . . . . a a . . . . a . . a . . 
                . . a . . a . . a . a . . . . . 
                . . a a a a a . a a a a . . . . 
                . a . . a a a a a a a a a . . . 
                . . . 7 a a 7 a a 7 a a 7 a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . 2 . 2 . . a 2 . . . . 
                . . . a a . . . a . a . . . 2 . 
                . . . . a . . . a a a . . a . . 
                . . . . a a . . . a a a a a . . 
                . . 2 a . a a . . . a . . . . . 
                . . . a a a a . a . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a a 7 a a 7 a a 7 a a . . 
                . . a 7 a a 7 a a 7 a a 7 a a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . a . . . . . . . . 
                . . . . . . a . . . . a a a . . 
                . . . . . a . a . . . a . . . . 
                . . . . a . . . . . a a a a . . 
                . . . . a a . . . . a . . a . . 
                . . a . . a . . a . a . . . . . 
                . . a a a a a . a a a a . . . . 
                . a . . a a a a a a a a a . . . 
                . . . 7 a a 7 a a 7 a a 7 a . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . 2 . . . . . . 
                . . . . 2 . . . . a . 2 a . . . 
                . . a a . . . . . a . . a . . . 
                . . a . . . . . . a . . a . . . 
                . . a a a a a . a a . . a a . . 
                . . . . . . a . a . . . a . . . 
                . . . . . a a . a . . a a . . . 
                . . . . a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . a a 7 a a 7 a a 7 a a 7 a . 
                . . . . . a a 7 a a 7 a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . a . . . . . . . . a . . 
                . . . . . a . . a a . . a . . . 
                . . a . . a . . . a . a . . . . 
                . . . a a a a . . . a . . a . . 
                . . . . . . a . a . a . a . . . 
                . . . . . a a . a a a a . . . . 
                . . . . a a a a a a a a a . . . 
                . . . a 7 a a 7 a a 7 a a 7 . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . a . . . . . . . 
                . . . . . . . . a . . a . . . . 
                . . . . a . . . a . . a . . . . 
                . . . . a a . a . . a . . . . . 
                . . . . . . a . . . a . . . . . 
                . . . . . a a . a a a a . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . a . . . . . . . . . . 
                . . . . . . a . . . a . . . . . 
                . . . . . a a . a a . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `],
            200,
            false
            )
            sprites.setDataNumber(value, "type", 1)
            sprites.setDataNumber(value, "hp", 5)
        }
        value.setFlag(SpriteFlag.BounceOnWall, true)
    }
}
function initializeTilemaps () {
    map_field = tiles.createMap(tilemap`level15`)
    map_cave1 = tiles.createMap(tilemap`level9`)
    map_field2 = tiles.createMap(tilemap`level19`)
    map_mountainPath = tiles.createMap(tilemap`level20`)
    tiles.connectMapById(map_field, map_cave1, ConnectionKind.Door1)
    tiles.connectMapById(map_field, map_field2, ConnectionKind.Door2)
    tiles.connectMapById(map_mountainPath, map_field2, ConnectionKind.Door1)
    tiles.loadMap(map_field)
    setupMapField()
}
scene.onHitWall(SpriteKind.Spectre, function (sprite, location) {
    ghostChangeDirectionOnWallHit(sprite)
})
function moveBurrowers () {
    for (let value of sprites.allOfKind(SpriteKind.Burrowers)) {
        if (Math.percentChance(40) || value.vx == 0 && value.vy == 0) {
            if (Math.percentChance(60)) {
                value.setVelocity((randint(0, 1) * 2 - 1) * 20, 0)
            } else if (Math.percentChance(40)) {
                value.setVelocity(0, (randint(0, 1) * 2 - 1) * 20)
            } else {
                value.setVelocity((randint(0, 1) * 2 - 1) * randint(1, 2) * 10, (randint(0, 1) * 2 - 1) * randint(1, 2) * 10)
            }
            value.setFlag(SpriteFlag.GhostThroughSprites, true)
            if (sprites.readDataNumber(value, "type") == 0) {
                animation.runImageAnimation(
                value,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 4 . . . . . . . . . . 
                    . . . . . . 4 . . . 4 . . . . . 
                    . . . . . 4 4 . 4 4 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . 4 . . . . . . . 
                    . . . . . . . . 4 . . 4 . . . . 
                    . . . . 4 . . . 4 . . 4 . . . . 
                    . . . . 4 4 . 4 . . 4 . . . . . 
                    . . . . . . 4 . . . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . 4 . . . . . . . . . 
                    . . . . . . . 4 . 4 . . . . . . 
                    . . . . . . 4 4 . 4 . 4 4 4 . . 
                    . . . . 4 4 . 4 . . 4 . . . . . 
                    . . . 4 . . 4 . . . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . 4 . . . . . . . . 4 . . 
                    . . . . . 4 . . 4 4 . . 4 . . . 
                    . . 4 . . 4 . . . 4 . 4 . . . . 
                    . . . 4 4 4 4 . . . 4 . . 4 . . 
                    . . . . . . 4 . 4 . 4 . 4 . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . 4 2 . . . . 
                    . . . 4 4 . . . 4 . 4 . . . 2 . 
                    . . . . 4 . . . 4 4 4 . . 4 . . 
                    . . . . 4 4 . . . 4 4 4 4 4 . . 
                    . . 2 4 . 4 4 . . . 4 . . . . . 
                    . . . 4 4 4 4 . 4 . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . 4 . . . . 
                    . . . . . . 4 . . . . 4 . . . . 
                    . . 4 4 . . 4 4 . . . 4 . . . . 
                    . . . 4 4 . . 4 4 4 4 4 4 4 4 . 
                    . . . . 4 4 . . . . 4 . . . . 4 
                    . 4 4 . . 4 . . 4 . 4 . . . . . 
                    . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . 4 2 . . . . 
                    . . . 4 4 . . . 4 . 4 . . . 2 . 
                    . . . . 4 . . . 4 4 4 . . 4 . . 
                    . . . . 4 4 . . . 4 4 4 4 4 . . 
                    . . 2 4 . 4 4 . . . 4 . . . . . 
                    . . . 4 4 4 4 . 4 . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                    . . 4 5 4 4 5 4 4 5 4 4 5 4 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . 4 . . . . . . . . 
                    . . . . . . 4 . . . . 4 4 4 . . 
                    . . . . . 4 . 4 . . . 4 . . . . 
                    . . . . 4 . . . . . 4 4 4 4 . . 
                    . . . . 4 4 . . . . 4 . . 4 . . 
                    . . 4 . . 4 . . 4 . 4 . . . . . 
                    . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                    . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . . . . . . . 
                    . . . 4 4 . . 4 . . . 2 . . . . 
                    . . . . 4 . . 4 4 4 4 . . . . . 
                    . . . . 4 4 . . . 4 4 4 4 4 . . 
                    . . 2 . . 4 4 . . . 4 . . . 4 . 
                    . . . 4 4 4 4 2 4 . 4 . . . 2 . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . 4 . . . . 
                    . . . . . . 4 . . . . 4 . . . . 
                    . . 4 4 . . 4 4 . . . 4 . . . . 
                    . . . 4 4 . . 4 4 4 4 4 4 4 4 . 
                    . . . . 4 4 . . . . 4 . . . . 4 
                    . 4 4 . . 4 . . 4 . 4 . . . . . 
                    . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . 4 2 . . . . 
                    . . . 4 4 . . . 4 . 4 . . . 2 . 
                    . . . . 4 . . . 4 4 4 . . 4 . . 
                    . . . . 4 4 . . . 4 4 4 4 4 . . 
                    . . 2 4 . 4 4 . . . 4 . . . . . 
                    . . . 4 4 4 4 . 4 . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 4 4 5 4 4 5 4 4 5 4 . . 
                    . . 5 4 4 5 4 4 5 4 4 5 4 4 5 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . 4 . . . 4 4 . . . 
                    . . 4 4 . . . 4 . . . . 4 4 . . 
                    . . . 4 4 . . 4 . 4 4 . . 4 . . 
                    . . . . 4 4 4 4 . 4 4 . . 4 4 . 
                    . . . . . 4 4 . . 4 . . . 4 . . 
                    . . . . 4 4 4 . . 4 . 4 4 4 . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . 4 . . . . . . . . . . . 
                    . . 2 . 4 4 . 4 . 2 . . 4 . . . 
                    . . . 4 . . . . 4 . . 4 4 . . . 
                    . . . 4 . . . 4 4 4 . 4 . . . . 
                    . . . 4 4 4 4 4 . 4 4 4 4 2 2 . 
                    . 4 4 . . . . 4 . . 4 . . . . . 
                    . . . 4 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . 4 . . . . . . . . 
                    . . . . . . 4 . . . . 4 4 4 . . 
                    . . . . . 4 . 4 . . . 4 . . . . 
                    . . . . 4 . . . . . 4 4 4 4 . . 
                    . . . . 4 4 . . . . 4 . . 4 . . 
                    . . 4 . . 4 . . 4 . 4 . . . . . 
                    . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                    . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . 4 2 . . . . 
                    . . . 4 4 . . . 4 . 4 . . . 2 . 
                    . . . . 4 . . . 4 4 4 . . 4 . . 
                    . . . . 4 4 . . . 4 4 4 4 4 . . 
                    . . 2 4 . 4 4 . . . 4 . . . . . 
                    . . . 4 4 4 4 . 4 . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 4 5 4 4 5 4 4 5 4 4 . . 
                    . . 4 5 4 4 5 4 4 5 4 4 5 4 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . 4 . . . . . . . . 
                    . . . . . . 4 . . . . 4 4 4 . . 
                    . . . . . 4 . 4 . . . 4 . . . . 
                    . . . . 4 . . . . . 4 4 4 4 . . 
                    . . . . 4 4 . . . . 4 . . 4 . . 
                    . . 4 . . 4 . . 4 . 4 . . . . . 
                    . . 4 4 4 4 4 . 4 4 4 4 . . . . 
                    . 4 . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 5 4 4 5 4 4 5 4 4 5 4 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . 2 . . . . . . 
                    . . . . 2 . . . . 4 . 2 4 . . . 
                    . . 4 4 . . . . . 4 . . 4 . . . 
                    . . 4 . . . . . . 4 . . 4 . . . 
                    . . 4 4 4 4 4 . 4 4 . . 4 4 . . 
                    . . . . . . 4 . 4 . . . 4 . . . 
                    . . . . . 4 4 . 4 . . 4 4 . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . 4 4 5 4 4 5 4 4 5 4 4 5 4 . 
                    . . . . . 4 4 5 4 4 5 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . 4 . . . . . . . . 4 . . 
                    . . . . . 4 . . 4 4 . . 4 . . . 
                    . . 4 . . 4 . . . 4 . 4 . . . . 
                    . . . 4 4 4 4 . . . 4 . . 4 . . 
                    . . . . . . 4 . 4 . 4 . 4 . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . 4 4 4 4 4 4 4 4 4 . . . 
                    . . . 4 5 4 4 5 4 4 5 4 4 5 . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . 4 . . . . . . . 
                    . . . . . . . . 4 . . 4 . . . . 
                    . . . . 4 . . . 4 . . 4 . . . . 
                    . . . . 4 4 . 4 . . 4 . . . . . 
                    . . . . . . 4 . . . 4 . . . . . 
                    . . . . . 4 4 . 4 4 4 4 . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 4 . . . . . . . . . . 
                    . . . . . . 4 . . . 4 . . . . . 
                    . . . . . 4 4 . 4 4 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `],
                200,
                false
                )
            } else {
                animation.runImageAnimation(
                value,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . a . . . . . . . . . . 
                    . . . . . . a . . . a . . . . . 
                    . . . . . a a . a a . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . a . . . . . . . 
                    . . . . . . . . a . . a . . . . 
                    . . . . a . . . a . . a . . . . 
                    . . . . a a . a . . a . . . . . 
                    . . . . . . a . . . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . a . . . . . . . . . 
                    . . . . . . . a . a . . . . . . 
                    . . . . . . a a . a . a a a . . 
                    . . . . a a . a . . a . . . . . 
                    . . . a . . a . . . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . a . . . . . . . . a . . 
                    . . . . . a . . a a . . a . . . 
                    . . a . . a . . . a . a . . . . 
                    . . . a a a a . . . a . . a . . 
                    . . . . . . a . a . a . a . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . a 2 . . . . 
                    . . . a a . . . a . a . . . 2 . 
                    . . . . a . . . a a a . . a . . 
                    . . . . a a . . . a a a a a . . 
                    . . 2 a . a a . . . a . . . . . 
                    . . . a a a a . a . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . a . . . . 
                    . . . . . . a . . . . a . . . . 
                    . . a a . . a a . . . a . . . . 
                    . . . a a . . a a a a a a a a . 
                    . . . . a a . . . . a . . . . a 
                    . a a . . a . . a . a . . . . . 
                    . . a a a a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . 7 a a 7 a a 7 a a 7 a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . a 2 . . . . 
                    . . . a a . . . a . a . . . 2 . 
                    . . . . a . . . a a a . . a . . 
                    . . . . a a . . . a a a a a . . 
                    . . 2 a . a a . . . a . . . . . 
                    . . . a a a a . a . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a a 7 a a 7 a a 7 a a . . 
                    . . a 7 a a 7 a a 7 a a 7 a a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . a . . . . . . . . 
                    . . . . . . a . . . . a a a . . 
                    . . . . . a . a . . . a . . . . 
                    . . . . a . . . . . a a a a . . 
                    . . . . a a . . . . a . . a . . 
                    . . a . . a . . a . a . . . . . 
                    . . a a a a a . a a a a . . . . 
                    . a . . a a a a a a a a a . . . 
                    . . . 7 a a 7 a a 7 a a 7 a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . . . . . . . 
                    . . . a a . . a . . . 2 . . . . 
                    . . . . a . . a a a a . . . . . 
                    . . . . a a . . . a a a a a . . 
                    . . 2 . . a a . . . a . . . a . 
                    . . . a a a a 2 a . a . . . 2 . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . a . . . . 
                    . . . . . . a . . . . a . . . . 
                    . . a a . . a a . . . a . . . . 
                    . . . a a . . a a a a a a a a . 
                    . . . . a a . . . . a . . . . a 
                    . a a . . a . . a . a . . . . . 
                    . . a a a a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a a 7 a a 7 a a 7 a a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . a 2 . . . . 
                    . . . a a . . . a . a . . . 2 . 
                    . . . . a . . . a a a . . a . . 
                    . . . . a a . . . a a a a a . . 
                    . . 2 a . a a . . . a . . . . . 
                    . . . a a a a . a . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a a a 7 a a 7 a a 7 a . . 
                    . . 7 a a 7 a a 7 a a 7 a a 7 . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . a . . . a a . . . 
                    . . a a . . . a . . . . a a . . 
                    . . . a a . . a . a a . . a . . 
                    . . . . a a a a . a a . . a a . 
                    . . . . . a a . . a . . . a . . 
                    . . . . a a a . . a . a a a . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a a 7 a a 7 a a 7 a a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . a . . . . . . . . . . . 
                    . . 2 . a a . a . 2 . . a . . . 
                    . . . a . . . . a . . a a . . . 
                    . . . a . . . a a a . a . . . . 
                    . . . a a a a a . a a a a 2 2 . 
                    . a a . . . . a . . a . . . . . 
                    . . . a a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . a . . . . . . . . 
                    . . . . . . a . . . . a a a . . 
                    . . . . . a . a . . . a . . . . 
                    . . . . a . . . . . a a a a . . 
                    . . . . a a . . . . a . . a . . 
                    . . a . . a . . a . a . . . . . 
                    . . a a a a a . a a a a . . . . 
                    . a . . a a a a a a a a a . . . 
                    . . . 7 a a 7 a a 7 a a 7 a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . 2 . 2 . . a 2 . . . . 
                    . . . a a . . . a . a . . . 2 . 
                    . . . . a . . . a a a . . a . . 
                    . . . . a a . . . a a a a a . . 
                    . . 2 a . a a . . . a . . . . . 
                    . . . a a a a . a . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a a 7 a a 7 a a 7 a a . . 
                    . . a 7 a a 7 a a 7 a a 7 a a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . a . . . . . . . . 
                    . . . . . . a . . . . a a a . . 
                    . . . . . a . a . . . a . . . . 
                    . . . . a . . . . . a a a a . . 
                    . . . . a a . . . . a . . a . . 
                    . . a . . a . . a . a . . . . . 
                    . . a a a a a . a a a a . . . . 
                    . a . . a a a a a a a a a . . . 
                    . . . 7 a a 7 a a 7 a a 7 a . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . 2 . . . . . . 
                    . . . . 2 . . . . a . 2 a . . . 
                    . . a a . . . . . a . . a . . . 
                    . . a . . . . . . a . . a . . . 
                    . . a a a a a . a a . . a a . . 
                    . . . . . . a . a . . . a . . . 
                    . . . . . a a . a . . a a . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . a a 7 a a 7 a a 7 a a 7 a . 
                    . . . . . a a 7 a a 7 a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . a . . . . . . . . a . . 
                    . . . . . a . . a a . . a . . . 
                    . . a . . a . . . a . a . . . . 
                    . . . a a a a . . . a . . a . . 
                    . . . . . . a . a . a . a . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . a a a a a a a a a . . . 
                    . . . a 7 a a 7 a a 7 a a 7 . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . a . . . . . . . 
                    . . . . . . . . a . . a . . . . 
                    . . . . a . . . a . . a . . . . 
                    . . . . a a . a . . a . . . . . 
                    . . . . . . a . . . a . . . . . 
                    . . . . . a a . a a a a . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . a . . . . . . . . . . 
                    . . . . . . a . . . a . . . . . 
                    . . . . . a a . a a . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    `],
                200,
                false
                )
            }
            timer.after(400, function () {
                value.setFlag(SpriteFlag.GhostThroughSprites, false)
            })
            timer.after(3200, function () {
                value.setFlag(SpriteFlag.GhostThroughSprites, true)
            })
            timer.after(400, function () {
                value.setFlag(SpriteFlag.GhostThroughSprites, false)
            })
        } else if (Math.percentChance(50)) {
            value.setVelocity(0, 0)
        }
        if (tiles.tileIsWall(tiles.locationOfSprite(value))) {
            tiles.placeOnRandomTile(value, sprites.dungeon.darkGroundCenter)
        }
    }
}
function controlGhosts () {
    for (let this_ghost of sprites.allOfKind(SpriteKind.Spectre)) {
        this_ghost_index = sprites.allOfKind(SpriteKind.Spectre).indexOf(this_ghost)
        this_ghost_ready_to_fire = ghost_ready_to_fire[this_ghost_index]
        if (this_ghost_ready_to_fire == 1) {
        	
        } else if (Math.percentChance(60) || this_ghost_ready_to_fire == 2) {
            if (this_ghost_ready_to_fire == 2) {
                ghost_ready_to_fire[this_ghost_index] = 0
            }
            moveGhost(this_ghost, this_ghost_index)
        } else {
            this_ghost.setVelocity(0, 0)
            if (Math.percentChance(50)) {
                ghost_ready_to_fire[this_ghost_index] = 1
            }
            ghost_facing[this_ghost_index] = randint(0, 3)
            this_ghost.setImage(static_image_ghost[ghost_facing[this_ghost_index]])
            animation.runImageAnimation(
            this_ghost,
            animation_ghost[ghost_facing[this_ghost_index]],
            250,
            true
            )
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    otherSprite.destroy()
    info.changeLifeBy(1)
})
function makeBeetle (spawnTile: Image) {
    beetle = sprites.create(img`
        .......ffff.......
        .....ff3333ff.....
        ....f33113133f....
        ...f3333333333f...
        ..f333ffffff333f..
        ..f1ff333333ff1f..
        .ffff33333333ffff.
        .f3f3331133333f3f.
        .f3f33ffffff33f3f.
        f331ff333333ff133f
        f3fff33333333fff3f
        f3f3f33113333f3f3f
        .f3f1f333333f1f3f.
        .f3ffffffffffff3f.
        ..f1ff331133fff1..
        ..1ff33ffff33f1f1.
        ..ff1ff1ff1f1ff1f.
        ...1ff1f1f1ff1ff..
        `, SpriteKind.bug)
    tiles.placeOnRandomTile(beetle, spawnTile)
    i = 0
    while (distanceBetween2Sprites(mySprite, beetle) < 120) {
        i += 1
        tiles.placeOnRandomTile(beetle, spawnTile)
        if (player_dead == true || i > 30) {
            break;
        }
    }
    beetle_HP[sprites.allOfKind(SpriteKind.bug).indexOf(beetle)] = 4
    beetle.setFlag(SpriteFlag.BounceOnWall, true)
}
function teleport (x: number, y: number) {
    controller.moveSprite(mySprite, 0, 0)
    mySprite.startEffect(effects.blizzard, 500)
    mySpriteBodyAndHead.startEffect(effects.disintegrate, 500)
    mySpriteOuterLayer.startEffect(effects.disintegrate, 500)
    timer.after(100, function () {
        mySprite.setFlag(SpriteFlag.Invisible, true)
        mySpriteBodyAndHead.setFlag(SpriteFlag.Invisible, true)
        mySpriteFeet.setFlag(SpriteFlag.Invisible, true)
        mySpriteOuterLayer.setFlag(SpriteFlag.Invisible, true)
        timer.after(400, function () {
            tiles.placeOnTile(mySprite, tiles.getTileLocation(x, y))
            timer.after(200, function () {
                controller.moveSprite(mySprite, 80, 80)
                mySprite.setFlag(SpriteFlag.Invisible, false)
                mySpriteBodyAndHead.setFlag(SpriteFlag.Invisible, false)
                mySpriteFeet.setFlag(SpriteFlag.Invisible, false)
                mySpriteOuterLayer.setFlag(SpriteFlag.Invisible, false)
            })
        })
    })
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Spectre, function (sprite, otherSprite) {
    playerGotHit(1)
})
function DestroyAllTheThings () {
    tiles.destroySpritesOfKind(SpriteKind.Spectre)
    tiles.destroySpritesOfKind(SpriteKind.Building)
    tiles.destroySpritesOfKind(SpriteKind.Projectile)
    tiles.destroySpritesOfKind(SpriteKind.Text)
    tiles.destroySpritesOfKind(SpriteKind.Bat)
    tiles.destroySpritesOfKind(SpriteKind.Boss)
    tiles.destroySpritesOfKind(SpriteKind.Food)
    tiles.destroySpritesOfKind(SpriteKind.bug)
    tiles.destroySpritesOfKind(SpriteKind.Coin)
    tiles.destroySpritesOfKind(SpriteKind.Burrowers)
    beetle_skipMove = []
}
function makeGuardianStatue () {
    guardianStatue = sprites.create(img`
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ..................ffffff................
        ................ffffeeefff..............
        ...............ffeeeeeeeef..............
        ...............feeeeeeeeef..............
        ...............feeeeeeeeef..............
        ................ffeeeeefff..............
        .................fffffffff..............
        .............ffffeeeeeeeef..............
        ............ffeeeeeeeeeeeff.............
        ............feeeeeeeeeeffef.............
        ............feeeefeeeeeeffff............
        ............feeeefeeeeeefeeff...........
        ............feeeffeeeeeeffeef...........
        ...........ffeff.feeeeeeffeeff..........
        ...........feef..feeeeeeffeeef..........
        ...........feef..feeeeeefffeef..........
        ...........feef..feeeeeefffeef..........
        ...........fef...feeeeeeefffef..........
        ...........fef..ffffffffff.fef..........
        ...........fef.ffffffffff..fef..........
        ...........fef.feeef.feeff.fef..........
        ...........fef.feeef.feeff..fff.........
        ...........fef.feeef..feff..fef.........
        ...........fffffeeef..fefff.fef.........
        ..............feeeef..fefef.fff.........
        ..............feeeff..feffff............
        ..............feeef...feefff............
        ..............feeef...feeeff............
        ..............feeff...ffeeff............
        ............ffffff.....ffffff...........
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        ........................................
        `, SpriteKind.Boss)
    tiles.placeOnTile(guardianStatue, tiles.getTileLocation(7, 5))
    guardianStatue.y += -13
    guardianStatueAwake = 0
    guardianStatueHealth = 14
}
function setPlayerFacing () {
    if (facing == 0) {
        sword.bottom = mySpriteBodyAndHead.top - -1
        sword.x = mySprite.x
    } else if (facing == 1) {
        sword.top = mySprite.bottom - 1
        sword.x = mySprite.x
    } else if (facing == 2) {
        sword.right = mySprite.left + 4
        sword.y = mySprite.y - 4
    } else if (facing == 3) {
        sword.left = mySprite.right - 4
        sword.y = mySprite.y - 4
    }
    mySprite.setImage(static_image_hero_lower_hitbox[facing])
    mySpriteBodyAndHead.setImage(static_image_hero_body[facing])
    mySpriteFeet.setImage(static_image_hero_feet[facing])
    mySpriteOuterLayer.setImage(static_image_hero_outer_layer[facing])
    mySpriteBodyAndHead.bottom = mySprite.top + 4
    mySpriteBodyAndHead.x = mySprite.x
    mySpriteFeet.top = mySprite.bottom - 3
    mySpriteFeet.x = mySprite.x
    mySpriteOuterLayer.bottom = mySprite.top + 4
    mySpriteOuterLayer.x = mySprite.x
    if (sword.image != static_image_sword[4]) {
        sword.setImage(static_image_sword[facing])
    }
}
sprites.onOverlap(SpriteKind.Sword, SpriteKind.Bat, function (sprite, otherSprite) {
    playerStabsBat(otherSprite)
})
function treasureChest () {
    if (tiles.getLoadedMap() == map_field) {
        tiles.setTileAt(chestLocation, sprites.dungeon.chestOpen)
        game.splash("Nothing?")
        mySpriteOuterLayer.say("Why even have this here?", 2500)
    } else if (hasSword == 0 && tiles.getLoadedMap() == map_cave1) {
        hasSword = 1
        mySprite2 = sprites.create(img`
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            .........................................................................................fffffff..............
            .....................................................................................ffff1111111fffff.........
            .................................................................................ffff11111111111119f..........
            ............................................................................fffff11111111111111199f...........
            ........................................................................ffff11111111111111111119ff............
            ...................................................................fffff11111111111111111111999f..............
            ...............................................................ffff11111111111fff11111119999fff...............
            ...............................f...........................ffff111111111111fff1111119999ffff..................
            ..............................ff......................fffff111111111111ffff111119999ffff......................
            .............................fbbf.................ffff111111111111fffff111119999ffff..........................
            ...........................ffbbbf............fffff111111111111ffff1111119999ffff..............................
            ..........................fbbbbbbf.......ffff111111111111fffff1111119999ffff..................................
            ..........................fbbbfbbf...ffff11111111111fffff11111119999ffff......................................
            ..........................fbbbbbbbfff11111111111ffff111111119999ffff..........................................
            ...........................fbbbbbbf11111111fffff111111119999ffff..............................................
            ...........................fbbbbbbbf111ffff1111111119999ffff..................................................
            ..........................fffbbbfbbffff1111111119999ffff......................................................
            ......................ffffeefbbbbbbbf11111119999ffff..........................................................
            ...................fffeefeeeefbbbbbbf1119999ffff..............................................................
            ...............fffffeeeeefeeefbbbbbbbf99ffff..................................................................
            .............fffeeeefeeeeefeefbbbbfbbfff......................................................................
            ..........ffffeefeeeefeeeeefeefbbbbbbbf.......................................................................
            ..........fefeeeefeeeefeeeeefefbbbbbbbf.......................................................................
            ..........feefeeeefeeeefeeeeffffbbbbbbbf......................................................................
            ..........ffeeffeeefeeffffff...fbbbbfbbf......................................................................
            ...........feeeeffffff..........fbbbbbbbf.....................................................................
            ...........fffff................fbbbbbbbf.....................................................................
            .................................fffffffff....................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            ..............................................................................................................
            `, SpriteKind.Text)
        tiles.setTileAt(chestLocation, sprites.dungeon.chestOpen)
        mySprite2.setPosition(scene.cameraProperty(CameraProperty.X) + 8, scene.cameraProperty(CameraProperty.Y) - 46)
        game.splash("A sword!", "It's not very sharp...")
        mySprite2.destroy()
    }
}
function makeAllBeetles (spawnTile: Image) {
    tiles.createSpritesOnTiles(spawnTile, SpriteKind.bug)
    for (let value of sprites.allOfKind(SpriteKind.bug)) {
        mySprite.setImage(img`
            .......ffff.......
            .....ff3333ff.....
            ....f33113133f....
            ...f3333333333f...
            ..f333ffffff333f..
            ..f1ff333333ff1f..
            .ffff33333333ffff.
            .f3f3331133333f3f.
            .f3f33ffffff33f3f.
            f331ff333333ff133f
            f3fff33333333fff3f
            f3f3f33113333f3f3f
            .f3f1f333333f1f3f.
            .f3ffffffffffff3f.
            ..f1ff331133fff1..
            ..1ff33ffff33f1f1.
            ..ff1ff1ff1f1ff1f.
            ...1ff1f1f1ff1ff..
            `)
        value.setFlag(SpriteFlag.BounceOnWall, true)
        beetle_HP[sprites.allOfKind(SpriteKind.bug).indexOf(value)] = 4
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Boss, function (sprite, otherSprite) {
    if (tiles.getLoadedMap() == map_field) {
        playerOverlapsGuardianStatue()
    }
})
let beetle: Sprite = null
let this_ghost_ready_to_fire = 0
let heart: Sprite = null
let mySprite2: Sprite = null
let bat: Sprite = null
let money: Sprite = null
let map_mountainPath: tiles.WorldMap = null
let map_field2: tiles.WorldMap = null
let map_cave1: tiles.WorldMap = null
let chestLocation: tiles.Location = null
let i = 0
let ghost: Sprite = null
let delta = 0
let guardianFlame: Sprite = null
let guardianStatue: Sprite = null
let map_field: tiles.WorldMap = null
let projectile: Sprite = null
let guardianStatueDead = 0
let coverTile: Sprite = null
let kill_count_bat = 0
let guardianStatueAwake = 0
let sword: Sprite = null
let index = 0
let guardianStatueHealth = 0
let swordRefreshDelay = 0
let swordStabDuration = 0
let hasSword = 0
let player_dead = false
let kill_count = 0
let swingingSword = false
let ghost_shoot_interval = 0
let ghost_movement_interval = 0
let beetle_skipMove: number[] = []
let ghost_ready_to_fire: number[] = []
let beetle_HP: number[] = []
let animation_Bat: Image[][] = []
let static_image_bat: Image = null
let animation_ghost: Image[][] = []
let static_image_sword: Image[] = []
let static_image_hero_feet: Image[] = []
let static_image_hero_outer_layer: Image[] = []
let static_image_hero_body: Image[] = []
let static_image_hero_lower_hitbox: Image[] = []
let static_image_hero: Image[] = []
let static_image_ghost: Image[] = []
let facing = 0
let mySpriteOuterLayer: Sprite = null
let mySpriteFeet: Sprite = null
let mySpriteBodyAndHead: Sprite = null
let mySprite: Sprite = null
let player_invincible = false
let ghost_facing: number[] = []
let this_ghost_facing = 0
let this_ghost_index = 0
declareValues()
initializeTilemaps()
initializePlayer()
game.onUpdate(function () {
    setPlayerFacing()
})
forever(function () {
    for (let index2 = 0; index2 < 2; index2++) {
        if (tiles.getLoadedMap() == map_field || tiles.getLoadedMap() == map_field2) {
            if (sprites.allOfKind(SpriteKind.Spectre).length < 10) {
                makeGhost()
            }
            if (tiles.getLoadedMap() == map_field2 && sprites.allOfKind(SpriteKind.bug).length < 10) {
                makeBeetle(sprites.castle.tilePath5)
            }
        }
        pause(ghost_shoot_interval)
        ghostFireSpit()
        pause(ghost_shoot_interval)
        ghostFireSpit()
        controlGhosts()
        moveBats()
    }
    moveBeetles()
})
forever(function () {
    moveBurrowers()
    pause(4000)
})
// This variable can't changed during gameplay, only before the start
game.onUpdateInterval(swordRefreshDelay, function () {
    swingingSword = false
})
